<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ุญุงุณุจุฉ ุนูู ุงูุฑูู โข ุฑูุนุฉ ุงูุดุทุฑูุฌ ุงููุงุทูุฉ</title>
<style>
:root{
  --bg:#071025; --card:#071524; --muted:#0f2136; --ink:#e6eef6;
  --accent:#22d3ee; --accent2:#a78bfa; --ok:#10b981; --warn:#f59e0b;
  --glass: rgba(255,255,255,0.03);
}
*{box-sizing:border-box}
body{margin:0;background:linear-gradient(135deg,var(--bg),#021022);color:var(--ink);font:500 15px/1.6 system-ui,Segoe UI,Roboto,Arial}
.wrap{max-width:1200px;margin:18px auto;padding:18px}
.header{display:flex;justify-content:space-between;align-items:center;gap:10px}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:0 10px 30px #0008}
h1{font-size:18px;margin:0}
.tabs{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
.tab{padding:8px 12px;border-radius:10px;background:var(--glass);cursor:pointer;border:1px solid rgba(255,255,255,0.03)}
.tab.active{outline:2px solid var(--accent);background:linear-gradient(90deg,rgba(34,211,238,0.06),rgba(167,139,250,0.04))}
.container{display:grid;gap:16px;margin-top:12px}
.grid2{display:grid;grid-template-columns:1fr;gap:16px}
@media(min-width:1000px){.grid2{grid-template-columns:0.7fr 0.3fr}}
.card{background:linear-gradient(180deg,#051329,#031422);border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03)}
.help{font-size:13px;color:#9fb1c4}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
input,select,textarea,button{background:#081823;border:1px solid rgba(255,255,255,0.02);color:var(--ink);padding:8px 10px;border-radius:8px}
.kbd{font-family:ui-monospace,monospace;background:#06131e;padding:4px 8px;border-radius:6px}
.chess{width:100%;max-width:720px;border-radius:12px;overflow:hidden;border:6px solid rgba(255,255,255,0.02)}
.board{display:grid;grid-template-columns:repeat(8,1fr);grid-template-rows:repeat(8,1fr);width:100%;height:720px}
.sq{display:grid;place-items:center;font-size:12px;padding:6px;text-align:center;user-select:none}
.light{background:#dfe7ee10}
.dark{background:#0d2030}
.piece{display:grid;place-items:center;border-radius:8px;padding:6px;background:linear-gradient(180deg,#071a2a,#021824);border:1px solid rgba(255,255,255,0.03)}
.badge{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,0.03)}
.scroll{max-height:320px;overflow:auto;padding:8px;border-radius:8px;border:1px dashed rgba(255,255,255,0.02)}
.modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:60}
.modal{width:min(920px,96%);background:#071524;border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,0.04);max-height:90vh;overflow:auto}
.small{font-size:13px;color:#92a9bb}
.footer{font-size:13px;color:#92a9bb;margin-top:12px}
.table{width:100%;border-collapse:collapse;margin-top:8px}
.table th,.table td{border:1px solid rgba(255,255,255,0.03);padding:6px}
.table th{background:rgba(255,255,255,0.02)}
.btn{cursor:pointer}
.rumal-dot{display:inline-block;width:8px;height:8px;border-radius:50%;margin:1px;background:#e6eef6}
.rumal-dot.double{width:12px}

/* ุฃููุงู ุฎุงุตุฉ ููุญุงุดูุฉ (ุงูุตู 1 ู8) */
.sq[data-rank="1"], .sq[data-rank="8"]{border:1px solid var(--accent);box-shadow:0 0 6px rgba(34,211,238,0.2)}
/* ุฃููุงู ุฎุงุตุฉ ููุฌููุฏ (ุงูุตู 2 ู7) */
.sq[data-rank="2"], .sq[data-rank="7"]{border:1px solid var(--accent2);box-shadow:0 0 6px rgba(167,139,250,0.2)}
/* ุฃููุงู ุฎุงุตุฉ ููุณุงุญุฉ (ุงูุตููู 3-6) */
.sq[data-rank="3"], .sq[data-rank="4"], .sq[data-rank="5"], .sq[data-rank="6"]{opacity:0.8}

/* ุฑุณุงุฆู ุดุฌุฑุฉ ุงูุฑุญูู */
.sq.rumal-message{animation:pulse 2s infinite}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(167,139,250,0.4)}
  70%{box-shadow:0 0 0 10px rgba(167,139,250,0)}
  100%{box-shadow:0 0 0 0 rgba(167,139,250,0)}
}
</style>
</head>
<body>
<div class="wrap">
  <div class="header">
    <div class="brand"><div class="logo" aria-hidden="true"></div><h1>ุญุงุณุจุฉ ุนูู ุงูุฑูู โข ุฑูุนุฉ ุงูุดุทุฑูุฌ ุงููุงุทูุฉ</h1></div>
    <div class="row">
      <button id="exportBtn" class="btn">ุชุตุฏูุฑ JSON</button>
      <button id="importBtn" class="btn">ุงุณุชูุฑุงุฏ JSON</button>
      <label class="badge small">ูุญูุธ ูุญูููุง</label>
    </div>
  </div>

  <div class="tabs" id="tabs">
    <div class="tab active" data-tab="input">ุงูููุฏุฎูุงุช</div>
    <div class="tab" data-tab="board">ุงูุฑูุนุฉ</div>
    <div class="tab" data-tab="tables">ุงูุฌุฏุงูู</div>
    <div class="tab" data-tab="pgn">ุชุญููู PGN</div>
    <div class="tab" data-tab="about">ุญูู & ุงูุทุงููุณ</div>
  </div>

  <div class="container">

    <!-- INPUT -->
    <section class="card tabpane" data-pane="input">
      <h3>ุฅุฏุฎุงู 0/1 (0 = ูุฑุฏ ุ 1 = ุฒูุฌ)</h3>
      <div class="help">ุฃุฏุฎู 4 ุฎุงูุงุช (ูุซุงู: <span class="kbd">0101</span>). ุจุนุฏ ุงูุฅุฏุฎุงู: ุงููุฑ ุนูู ุฎุงูุฉ ูู ุงูุตู 1 ุฃู 8 ูุชุซุจูุช ุงูุดูู ููุงู. ุงููุฑ ูุฑุชูู ูุนุฑุถ ุงูุดุฑุญ ุงูููุณูุน.</div>

      <div class="row" style="margin-top:8px">
        <label>ุงููุถุน:</label>
        <select id="parityMode">
          <option value="odd0">0 = ูุฑุฏ (ูุณุชุญุณู)</option>
          <option value="odd1">1 = ุฒูุฌ</option>
        </select>
        <label class="small">ุงูููุฏุฎู ุงูุณุฑูุน:</label>
        <input id="quickBits" placeholder="ูุซุงู: 0101" maxlength="4" style="width:120px"/>
        <button id="quickClear">ูุณุญ</button>
      </div>

      <!-- ุฒุฑ ุชุดุบูู/ุฅููุงู ุงููุฑุงุกุฉ ุงูุตูุชูุฉ -->
      <div class="row" style="margin-top:8px">
        <button id="ttsToggleBtn" class="btn">ุชุดุบูู ูุฑุงุกุฉ AI</button>
        <span id="ttsStatus" class="small">(ูุชููู)</span>
      </div>

      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0">
      <h4>ุฅูุดุงุก ุงูุจููุฉ (ุงูุฃููุงุช โ 16 ุดูู)</h4>
      <div class="row">
        <button id="addFromInput" class="btn">ุฅุถุงูุฉ (ูู ุฃู)</button>
        <button id="randomMoms" class="btn">ุชูููุฏ ุนุดูุงุฆู</button>
        <button id="resetMoms" class="btn">ุฅุนุงุฏุฉ ุงูุถุจุท</button>
        <button id="build16" class="btn">ุชูููุฏ ุงูู16</button>
      </div>

      <div class="row" style="margin-top:8px">
        <button id="fillEmptySquares" class="btn">ููุก ุงููุฑุงุบุงุช ุจุดุฌุฑุฉ ุงูุฑุญูู</button>
        <button id="analyzeAllWords" class="btn">ุชุญููู ุฌููุน ุงููููุงุช</button>
      </div>

      <div id="momsRow" class="row" style="margin-top:8px;overflow:auto"></div>
      <div id="resRow" class="row" style="margin-top:8px;flex-wrap:wrap"></div>
    </section>

    <!-- BOARD -->
    <section class="grid2">
      <div class="card tabpane" data-pane="board" style="min-height:520px">
        <h3>ุฑูุนุฉ ุงูุฑูู/ุงูุดุทุฑูุฌ</h3>
        <div class="row">
          <label>ุณูุฉ ุงูุฌููุฏ:</label>
          <select id="pawnTheme"><option value="grain">๐พ ููุญ (ูุถุงุนูุงุช)</option><option value="atom">โ๏ธ ุฐุฑู (ุจุชูุงุช)</option></select>
          <label><input type="checkbox" id="ttsToggle" checked/> ุชูุนูู ุงูุดุทุฑูุฌ ุงููุงุทู (TTS)</label>
        </div>
        <div class="help small" style="margin-top:6px">ุงููุฑ ุนูู ุฎุงูุฉ ูู ุงูุตู 1 ุฃู 8 ุจุนุฏ ุฅุฏุฎุงู 4 ุฎุงูุงุช ูุฅุณูุงุท ุงูุดูู. ุงููุฑ ูุฑุชูู ุนูู ุฎุงูุฉ ููุชุญ ุงูุดุฑุญ ุงูููุณูุน.</div>
        <div class="chess" style="margin-top:10px">
          <div class="board" id="board"></div>
        </div>
      </div>

      <div class="card">
        <h3>ุฃุฑุถูุฉ ุงููุนูููุงุช</h3>
        <div id="squareInfo" class="small">ุงุฎุชุฑ ุฎุงูุฉ ูุนุฑุถ ุงูุชูุงุตูู (ุงูุดูู/ุงูุจูุช/ุงูุฑููุฒ...)</div>
        <div style="margin-top:8px" id="infoLog" class="scroll small"></div>
      </div>
    </section>

    <!-- TABLES -->
    <section class="card tabpane" data-pane="tables" style="display:none">
      <h3>ูุงููุณ ุงูุฃุดูุงู & ุงูุจููุช</h3>
      <div class="help small">ููููู ุชุนุฏูู ุฃู ุฎููุฉ ุซู ุญูุธ ุงูุชุบููุฑุงุช.</div>
      <div id="figTableWrap" style="margin-top:10px"></div>

      <h4 style="margin-top:12px">ุงูุจููุช 1โ12 (ุชูููุฏ ุขูู ุจุนุฏ ุงูู16)</h4>
      <div id="houseTableWrap" style="margin-top:8px"></div>

      <h4 style="margin-top:12px">ุงูุฃุณูุงุก ุงูุญุณูู ูุงุฑุชุจุงุทูุง</h4>
      <div id="divineNamesTable" style="margin-top:8px"></div>

      <h4 style="margin-top:12px">ุชุฎุช (ุงูุจูุด) ู ุฅุดุงุฑุงุชู</h4>
      <div id="takhtTableWrap" style="margin-top:8px"></div>
    </section>

    <!-- PGN -->
    <section class="card tabpane" data-pane="pgn" style="display:none">
      <h3>ุชุญููู ููู PGN ููู ุงูุฑูู</h3>
      <div class="row">
        <input type="file" id="filePGN" accept=".pgn,text/plain"/>
        <button id="btnLoadPGN" class="btn">ุชุญููู</button>
        <button id="btnSample" class="btn">ูุซุงู PGN</button>
      </div>
      <textarea id="pgnText" rows="6" style="width:100%;margin-top:8px" placeholder="ุงูุตู PGN ููุง"></textarea>
      <div class="row" style="margin-top:8px">
        <button id="analyzePGN" class="btn">ุญููู ููู ุงูุฑูู</button>
      </div>
      <div id="pgnLog" class="scroll small" style="margin-top:8px"></div>
    </section>

    <!-- ABOUT -->
    <section class="card tabpane" data-pane="about" style="display:none">
      <h3>ุญูู ุงูุฑุจุท ุจุณูุณูุฉ ุงูุดูุฎ ุทุงููุณ</h3>
      <p class="small">ูุถุนุช ููุฎูุตูุง ูู ูุตุงุฏุฑ ุนุงูุฉ ูุนูู ุงูุฑูู (ุงูุฃููุงุช โ 16 ุดูู โ ุงูุจููุช โ ุงูุนูุงุตุฑ ูุงูููุงูุจ) ููุฑุฌุน ููุดุฑูุญุงุช ุฏุงุฎู ุงููmodal. ุฅู ุฑุบุจุช ุงูุชุจุงุณุงุช ุญุฑููุฉ ูู ููุฏูููุงุชู ุฃุฏุฑุฌูุง ููุง (ุฃู ุงูุตู ุงููtranscript ูู ุงูุญูู ุงูุฎุงุต ุฏุงุฎู ูู ุดุงุดุฉ ููุณูุนุฉ) ูุณูุชู ุนุฑุถูุง ูุน ุฅุดุงุฑุฉ ุฒูููุฉ.</p>
      <h4>ููุฎุต ููุงุท ุดุงุฆุนุฉ ูู ุณูุณูุฉ "ุนูู ุงูุฑูู" (ููุฌููุน)</h4>
      <ul class="small">
        <li>ุฎุทูุงุช ุงูุนูู: ุงุณุชุฎุฑุงุฌ ุงูุฃููุงุช (4) โ ุชูููุฏ ุงูุจูุงุช/ููุงุชุฌ โ ุงููุตูู ุฅูู 16 ุดูููุง ุชูุณูุฑูุงู.</li>
        <li>ุชุฑุชุจุท ุงูุฃุดูุงู ุจุงูุนูุงุตุฑ ุงูุฃุฑุจุนุฉ (ูุงุฑ/ุชุฑุงุจ/ููุงุก/ูุงุก) ูุจููุงูุจ/ูุคุซุฑุงุช ุณูุงููุฉ ูุชุญุฏูุฏ ุงูุทุงุจุน.</li>
        <li>ุงูุจููุช ุชูุณุชุฎุฏู ููุฅุดุงุฑุฉ ุฅูู ูุฌุงูุงุช ุงูุญูุงุฉ (ููุณุ ูุงูุ ุนููุ ุณูุฑุ ุฅูุฎ).</li>
        <li>ุชูุฌุฏ ูุฏุงุฑุณ ูุฎุชููุฉ (ุงูุฒูุงุชูุ ุฅุฏุฑูุณุ ูุญููุฉ)ุ ูุฐุง ุงูุชุทุจูู ูุงุจู ููุชุนุฏูู ูุงูุงุญุชูุงุธ ุจูุตูู ุงูุฎุงุต.</li>
        <li>ุงูู "ุชุฎุช" (ุงูุจูุด) ููุณุชุฎุฏู ูุชุญุฏูุฏ ุงููุฌุงูุงุช ุงูุฑุฆูุณูุฉ ูู ุงูุญูุงุฉ ููููุง ูููู ุงูุฃุฑูุงู.</li>
      </ul>
      <h4>ุนูู ุงูุฑูู: ุงุณุชุฎุฏุงูุงุชู</h4>
      <ul class="small">
        <li>ุงูุชูุจุค ุจุงููุณุชูุจู: ุชุญููู ุงูุฃุฑูุงู ูููู ุงูุงุชุฌุงูุงุช ุงููุณุชูุจููุฉ.</li>
        <li>ุงูุนูุงุฌ ุงูุฑูุญู: ุงุณุชุฎุฏุงู ุงูุฃุณูุงุก ุงูุญุณูู ูุงูุขูุงุช ุงููุฑุขููุฉ ูุนูุงุฌ ุงููุดุงูู.</li>
        <li>ุงูุงุณุชุดุงุฑุฉ: ูุณุงุนุฏุฉ ุงูุฃุดุฎุงุต ูู ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช ุงููููุฉ.</li>
        <li>ุงูุชูููุฉ ุงูุฐุงุชูุฉ: ููู ููุงุท ุงูููุฉ ูุงูุถุนู ูู ุงูุดุฎุต.</li>
        <li>ุงูุชูุตู ุฅูู ุงูุญููุฉ: ูู ุฎูุงู ุชุญููู ุงูุฃุฑูุงู ูุงูุฑููุฒ.</li>
      </ul>
      <h4>ุฅุถุงูุฉ ูุต/Transcript ููููุฏูู (ูุทุงููุณ)</h4>
      <div class="small">ูุฅุฏุฑุงุฌ ุงูุชุจุงุณุงุช ุญุฑููุฉ ูู ุงูููุฏูู: ุงูุตู ูุต ุงููtranscript ููุง ูุณูุธูุฑ ุฏุงุฎู ุงูุดุฑุญ ุงูููุณูุน ุนูุฏ ุงูุทูุจ.</div>
      <textarea id="videoTranscript" rows="6" style="width:100%;margin-top:8px" placeholder="ุงูุตู ููุง Transcript ููููุฏูู ุฅู ุฃุฑุฏุช ุงูุชุจุงุณุงุช ุญุฑููุฉ..."></textarea>
      <div style="margin-top:8px" class="row">
        <button id="applyTranscript" class="btn">ุงุญูุธ ุงููุต ูู ุงููุงุนุฏุฉ</button>
      </div>
    </section>

    <div class="footer">ุงููุณุฎุฉ ุงูููุชููุฉ โ ููููู ุชุนุฏูู ุงูููุงููุณ ุฏุงุฎู ุงูุชุทุจูู. ุญูุธ ูุญูู: ูุนู. ูุง ูุชู ุฅุฑุณุงู ุจูุงูุงุช ููุฎุงุฑุฌ.</div>
  </div>
</div>

<!-- Modal ููุดุฑุญ ุงูููุณุน -->
<div class="modal-back" id="modalBack">
  <div class="modal" id="modal">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h3 id="modalTitle">ุดุฑุญ ุงูุดูู</h3>
      <div><button id="modalClose" class="btn">ุฅุบูุงู</button></div>
    </div>
    <div id="modalBody" style="margin-top:8px"></div>
  </div>
</div>

<input type="file" id="jsonIn" accept="application/json" style="display:none"/>
<script>
/* ---------- ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ---------- */
// ุงูุฃุณูุงุก ุงูุญุณูู ูุน ุฑุจุทูุง ุจุงูุฃุดูุงู ูุงูุจููุช
const DIVINE_NAMES = [
  { name: "ุงูุฑุญูู", abjad: 298, meaning: "ุงูููุนู ุจุงูุฑุญูุฉ ุนูู ุฌููุน ุงูุฎูู", 
    associatedForms: ["ุงูุดูุณ", "ุงูุญูู", "ุงูุฃุณุฏ"], 
    associatedHouse: 1,
    secretMessage: "ุงูุณุฑ: ุงุจุฏุฃ ุฃุนูุงูู ุจุงูุฑุญูุฉ ูุณุชุฌุฏ ุงูุฎูุฑ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฑุญูู", abjad: 290, meaning: "ุงูููุนู ุจุงูุฑุญูุฉ ุนูู ุงููุคูููู ูู ุงูุขุฎุฑุฉ", 
    associatedForms: ["ุงูููุฑ", "ุงูุณุฑุทุงู", "ุงูุญูุช"], 
    associatedHouse: 4,
    secretMessage: "ุงูุณุฑ: ุงุณุชุนู ุจุงูุฑุญูุฉ ูู ุนูุงูุงุชู ุงูุฃุณุฑูุฉ ูุณุชุฌุฏ ุงูุฏุนู ูู ุญูุซ ูุง ุชุญุชุณุจ" },
  { name: "ุงูููู", abjad: 90, meaning: "ุงููุงูู ุงููุชุตุฑู ูู ุงูููููุฉ", 
    associatedForms: ["ุงูุฌุฏู", "ุงูุซูุฑ", "ุงูุนูุฑุจ"], 
    associatedHouse: 10,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูููููุช ูู ุฃุนูุงูู ุงูููููุฉ ูุณุชุญุธู ุจุงูููุงูุฉ ุงููุฑูููุฉ" },
  { name: "ุงููุฏูุณ", abjad: 170, meaning: "ุงูููุฒู ุนู ุงูููุงุฆุต", 
    associatedForms: ["ุงูุดูุณ", "ุงูุฌูุฒุงุก", "ุงูุฏูู"], 
    associatedHouse: 11,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุฏุงุณุฉ ูู ุชูููุฑู ูุณุชุฌุฏ ุงููุถูุญ ูู ูุฑุงุฑุงุชู" },
  { name: "ุงูุณูุงู", abjad: 136, meaning: "ุงูููุฒู ุนู ุงูุนููุจ ูุงูุขูุงุช", 
    associatedForms: ["ุงูุณุฑุทุงู", "ุงูููุณ", "ุงูุณูู"], 
    associatedHouse: 12,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุณูุงู ูู ููุจู ูุณุชุฌุฏ ุงูุฑุงุญุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุคูู", abjad: 131, meaning: "ุงููุคูู ุจุงูุฎูู ูุฅุธูุงุฑ ุงูุตุฏู", 
    associatedForms: ["ุงูุญูู", "ุงูุฌูุฒุงุก", "ุงูููุณ"], 
    associatedHouse: 9,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฅููุงู ูู ูู ุนูู ูุณุชุฌุฏ ุงูุฏุนู ูู ุญูุซ ูุง ุชุญุชุณุจ" },
  { name: "ุงูููููู", abjad: 145, meaning: "ุงูุญุงูุธ ุนูู ุฎููู", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุซูุฑ", "ุงูุฏูู"], 
    associatedHouse: 3,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุญูุธ ูู ุฃููุฑู ูุณุชุฌุฏ ุงูุชูููู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุนุฒูุฒ", abjad: 111, meaning: "ุฐู ุงูุนุฒุฉ ุงูุฐู ูุง ููุฐู", 
    associatedForms: ["ุงูุฃุณุฏ", "ุงูุนูุฑุจ", "ุงูููุณ"], 
    associatedHouse: 5,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุนุฒูุฉ ูู ููุชู ูุณุชุฌุฏ ุงูุชููู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฌุจุงุฑ", abjad: 206, meaning: "ุงูุฐู ููุตูุญ ูุง ููุนุทูู", 
    associatedForms: ["ุงูุซูุฑ", "ุงูุนูุฑุจ", "ุงูุณูู"], 
    associatedHouse: 6,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูููุฉ ูู ุฅุตูุงุญ ุฃุฎุทุงุฆู ูุณุชุฌุฏ ุงูุนูู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุชูุจุฑ", abjad: 661, meaning: "ุงูุฐู ูุง ููุถุงููู ุฃุญุฏ ูู ุนุธูุฉ", 
    associatedForms: ["ุงูุฃุณุฏ", "ุงูุฌุฏู", "ุงูุฏูู"], 
    associatedHouse: 7,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุนุธูุฉ ูู ุชูุงุถุนู ูุณุชุฌุฏ ุงููุฎุฑ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฎุงูู", abjad: 145, meaning: "ุงูุฐู ูุจุฏุน ุงูุฎูู ูู ุนุฏู", 
    associatedForms: ["ุงูุญูู", "ุงูุฌูุฒุงุก", "ุงูุฏูู"], 
    associatedHouse: 1,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฅุจุฏุงุน ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงูุฎูู ุงูุฌุฏูุฏ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุจุงุฑุฆ", abjad: 203, meaning: "ุงูุฐู ููุตูุญ ููุจุฏุน ุงูุฎูู", 
    associatedForms: ["ุงูุณุฑุทุงู", "ุงูุฌูุฒุงุก", "ุงูุณูู"], 
    associatedHouse: 4,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุงุจุชุฏุงุน ูู ุญู ูุดุงููู ูุณุชุฌุฏ ุงูุญููู ุงููุจุชูุฑุฉ" },
  { name: "ุงููุตูุฑ", abjad: 1190, meaning: "ุงูุฐู ููุตููุฑ ุงูุฎูู ููู ูุดุงุก", 
    associatedForms: ["ุงูุฏูู", "ุงูุฌุฏู", "ุงูุนูุฑุจ"], 
    associatedHouse: 10,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุชูููุน ูู ุทุฑูู ูุณุชุฌุฏ ุงูุชูุงุณุจ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุบูุงุฑ", abjad: 1026, meaning: "ุงููุซูู ุงููุบูุฑุฉ", 
    associatedForms: ["ุงูุณูู", "ุงูุนูุฑุจ", "ุงูุณุฑุทุงู"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุบูุฑุฉ ูู ุฃุฎุทุงุฆู ูุณุชุฌุฏ ุงูุนูู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูููุงุฑ", abjad: 325, meaning: "ุงูุฐู ูุง ููููุฑ", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุฃุณุฏ", "ุงูููุณ"], 
    associatedHouse: 5,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูููุฑ ูู ุงูุชุบูุจ ุนูู ุนูุงุฆูุจู ูุณุชุฌุฏ ุงููุตุฑ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูููุงุจ", abjad: 14, meaning: "ุงูููุนู ุจุงููุนู ุจูุง ุงุณุชุญูุงู", 
    associatedForms: ["ุงูุณูู", "ุงูุญูุช", "ุงูุณุฑุทุงู"], 
    associatedHouse: 12,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุนุทุงุก ุจูุง ููุงุจู ูุณุชุฌุฏ ุงููุจุงุช ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฑุฒุงู", abjad: 1050, meaning: "ุงูููุนู ุนูู ุฌููุน ุฎููู", 
    associatedForms: ["ุงูุซูุฑ", "ุงูุฌุฏู", "ุงูุณูู"], 
    associatedHouse: 2,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฑุฒู ูู ุฌููุฏู ูุณุชุฌุฏ ุงูููุงูุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุชุงุญ", abjad: 489, meaning: "ุงูุฐู ููุชุญ ุงููุบุงููู", 
    associatedForms: ["ุงูููุณ", "ุงูุฌูุฒุงุก", "ุงูุญูู"], 
    associatedHouse: 9,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุชุญ ูู ุนูุงุฆูู ูุณุชุฌุฏ ุงููุฎุงุฑุฌ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุนููู", abjad: 150, meaning: "ุงูุนููู ุจูู ุดูุก", 
    associatedForms: ["ุงูุฏูู", "ุงูุฌูุฒุงุก", "ุงูุซูุฑ"], 
    associatedHouse: 3,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุนูู ูู ูู ุฃูุฑ ูุณุชุฌุฏ ุงููุนุฑูุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุงุจุถ", abjad: 152, meaning: "ุงูุฐู ููุจุถ ุงูุฃุฑูุงุญ ูุงูุฃุฑุฒุงู", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุซูุฑ", "ุงูุฌุฏู"], 
    associatedHouse: 6,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุจุถ ุนูู ุฃุฎุทุงุกู ูุณุชุฌุฏ ุงูุชุตุญูุญ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุจุงุณุท", abjad: 102, meaning: "ุงูุฐู ูุจุณุท ุงูุฑุฒู", 
    associatedForms: ["ุงูุณูู", "ุงูููุณ", "ุงูุฏูู"], 
    associatedHouse: 11,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุจุณุท ูู ุฑุฒูู ูุณุชุฌุฏ ุงูููุงุก ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฎุงูุถ", abjad: 146, meaning: "ุงูุฐู ูุฎูุถ ุงูุฏุฑุฌุงุช", 
    associatedForms: ["ุงูุฌุฏู", "ุงูุซูุฑ", "ุงูุนูุฑุจ"], 
    associatedHouse: 10,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฎูุถ ูู ุบุฑูุฑู ูุณุชุฌุฏ ุงูุฑูุนุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฑุงูุน", abjad: 306, meaning: "ุงูุฐู ูุฑูุน ุงูุฏุฑุฌุงุช", 
    associatedForms: ["ุงูุญูู", "ุงูููุณ", "ุงูุฃุณุฏ"], 
    associatedHouse: 1,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฑูุน ุจุนููู ูุณุชุฌุฏ ุงูุชููู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุนุฒ", abjad: 107, meaning: "ุงูููุนูู ุงูุฏุฑุฌุงุช", 
    associatedForms: ["ุงูุฃุณุฏ", "ุงูุฌุฏู", "ุงูุฏูู"], 
    associatedHouse: 7,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุนุฒูุฉ ูู ุฅููุงูู ูุณุชุฌุฏ ุงูุฑูุนุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุฐู", abjad: 77, meaning: "ุงูููุฏูู ุงูุฏุฑุฌุงุช", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุซูุฑ", "ุงูุณูู"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฐู ูู ุชูุจุชู ูุณุชุฌุฏ ุงูุนุฒูุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุณููุน", abjad: 145, meaning: "ุงูุฐู ูุณูุน ุฌููุน ุงูุฃุตูุงุช", 
    associatedForms: ["ุงูุฏูู", "ุงูุฌูุฒุงุก", "ุงูุณูู"], 
    associatedHouse: 3,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุณูุงุน ูู ุชูุฌููุงุชู ูุณุชุฌุฏ ุงูุงุฑุดุงุฏ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุจุตูุฑ", abjad: 212, meaning: "ุงูุฐู ูุฑู ุฌููุน ุงูุฃุดูุงุก", 
    associatedForms: ["ุงูุฏูู", "ุงูุนูุฑุจ", "ุงูุณูู"], 
    associatedHouse: 12,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุจุตุฑ ูู ุฃูุนุงูู ูุณุชุฌุฏ ุงูุฑุดุฏ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุญูู", abjad: 68, meaning: "ุงูุฐู ูุญูู ุจูู ุฎููู", 
    associatedForms: ["ุงูููุฒุงู", "ุงูุฌูุฒุงุก", "ุงูุฏูู"], 
    associatedHouse: 7,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุญูู ูู ุฎุตููุงุชู ูุณุชุฌุฏ ุงูุนุฏู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุนุฏู", abjad: 104, meaning: "ุงูููุฒู ุนู ุงูุธูู", 
    associatedForms: ["ุงูููุฒุงู", "ุงูุซูุฑ", "ุงูุฌุฏู"], 
    associatedHouse: 2,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุนุฏู ูู ุฃูุนุงูู ูุณุชุฌุฏ ุงูุชูุงุฒู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุทูู", abjad: 139, meaning: "ุงูุฐู ููุนู ุนูู ุนุจุงุฏู ูุทูุงู", 
    associatedForms: ["ุงูุณูู", "ุงูุญูุช", "ุงูุณุฑุทุงู"], 
    associatedHouse: 12,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุทู ูู ุชุนุงููู ูุณุชุฌุฏ ุงูุฑุถุง ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฎุจูุฑ", abjad: 1418, meaning: "ุงูุนููู ุจุจูุงุทู ุงูุฃููุฑ", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุณูู", "ุงูุฏูู"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฎุจุฑุฉ ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงูุญููุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุญููู", abjad: 78, meaning: "ุงูุฐู ูุง ูุนุงุฌู ุจุงูุนูุงุจ", 
    associatedForms: ["ุงูุณูู", "ุงูุณุฑุทุงู", "ุงูุญูุช"], 
    associatedHouse: 4,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุญูู ูู ุฑุฏูุฏ ุฃูุนุงูู ูุณุชุฌุฏ ุงููุฏูุก ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุนุธูู", abjad: 1118, meaning: "ุฐู ุงูุนุธูุฉ ุงูุชู ูุง ุชูุญุตู", 
    associatedForms: ["ุงูุฌุฏู", "ุงูุฃุณุฏ", "ุงูููุณ"], 
    associatedHouse: 10,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุนุธูุฉ ูู ุฃูุนุงูู ูุณุชุฌุฏ ุงููุฌุฏ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุบููุฑ", abjad: 1286, meaning: "ุงููุซูุฑ ุงููุบูุฑุฉ", 
    associatedForms: ["ุงูุณูู", "ุงูุนูุฑุจ", "ุงูุณุฑุทุงู"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุบูุฑุฉ ูู ุฃุฎุทุงุฆู ูุณุชุฌุฏ ุงูุนูู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุดููุฑ", abjad: 526, meaning: "ุงูููุงูุฆ ุนูู ุงููููู", 
    associatedForms: ["ุงูุณูู", "ุงูููุณ", "ุงูุฏูู"], 
    associatedHouse: 11,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุดูุฑ ูู ูุนูู ูุณุชุฌุฏ ุงูุฒูุงุฏุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุนูู", abjad: 160, meaning: "ุงูุฑููุน ุนู ุงูููุงู", 
    associatedForms: ["ุงูุฌุฏู", "ุงูุฏูู", "ุงูุญูู"], 
    associatedHouse: 1,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุนูู ูู ููุชู ูุณุชุฌุฏ ุงูุฑูุนุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุจูุฑ", abjad: 232, meaning: "ุงูุฐู ูุง ูููุงุณ ุจุบูุฑู", 
    associatedForms: ["ุงูุฌุฏู", "ุงูุนูุฑุจ", "ุงูููุณ"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุจุฑูุงุก ูู ุนุจุงุฏุชู ูุณุชุฌุฏ ุงูุนุธูุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุญููุธ", abjad: 1408, meaning: "ุงูุญุงูุธ ูุฌููุน ุงูุฃุดูุงุก", 
    associatedForms: ["ุงูุฌุฏู", "ุงูุซูุฑ", "ุงูุนูุฑุจ"], 
    associatedHouse: 10,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุญูุธ ูู ูุนูู ูุณุชุฌุฏ ุงูุฏูุงู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููููุช", abjad: 570, meaning: "ุงูููุฏุฑ ููุฃุฑุฒุงู", 
    associatedForms: ["ุงูุฌุฏู", "ุงูุซูุฑ", "ุงูุณูู"], 
    associatedHouse: 2,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุชูุฏูุฑ ูู ุฎุทุทู ูุณุชุฌุฏ ุงูููุงุก ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุญุจูุจ", abjad: 8, meaning: "ุงููุญุจูุจ ูู ุนุจุงุฏู", 
    associatedForms: ["ุงูุณูู", "ุงูุญูุช", "ุงูุณุฑุทุงู"], 
    associatedHouse: 12,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุญุจุฉ ูู ุชุนุงููู ูุณุชุฌุฏ ุงููุจูู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุงุญุฏ", abjad: 13, meaning: "ุงูุฐู ูุง ุดุฑูู ูู", 
    associatedForms: ["ุงูุดูุณ", "ุงูุญูู", "ุงูุฃุณุฏ"], 
    associatedHouse: 1,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุญุฏุฉ ูู ุชูููุฑู ูุณุชุฌุฏ ุงูุงุชุณุงู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุตูุฏ", abjad: 133, meaning: "ุงูุฐู ูุตูุฏ ูู ุงูุฎูู", 
    associatedForms: ["ุงูุดูุณ", "ุงูุฌุฏู", "ุงูููุณ"], 
    associatedHouse: 9,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุตููุฏ ูู ุฃุฒูุงุชู ูุณุชุฌุฏ ุงูููุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุงุฏุฑ", abjad: 305, meaning: "ุงููุงุฏุฑ ุนูู ูู ุดูุก", 
    associatedForms: ["ุงูุญูู", "ุงูููุณ", "ุงูุฃุณุฏ"], 
    associatedHouse: 5,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูููุฉ ูู ุชุญุฑูุงุชู ูุณุชุฌุฏ ุงูุฅูุฌุงุฒ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูููุชุฏุฑ", abjad: 524, meaning: "ุงูุฐู ููุฏุฑ ุงูุฃููุฑ", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูููุณ", "ุงูุฌุฏู"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุฏุฑุฉ ูู ุชุญุฏูุงุชู ูุณุชุฌุฏ ุงูุญููู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูููุฏู", abjad: 134, meaning: "ุงูุฐู ููุฏู ูู ูุดุงุก", 
    associatedForms: ["ุงูุญูู", "ุงูููุณ", "ุงูุฏูู"], 
    associatedHouse: 9,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุชูุฏูู ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงูุชูุฏู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุคุฎุฑ", abjad: 1003, meaning: "ุงูุฐู ูุคุฎุฑ ูู ูุดุงุก", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุณูู", "ุงูุซูุฑ"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุชุฃุฎูุฑ ูู ูุฑุงุฑุงุชู ูุณุชุฌุฏ ุงูุชุฑูุซ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฃูู", abjad: 37, meaning: "ุงูุณุงุจู ุจุฐุงุชู", 
    associatedForms: ["ุงูุดูุณ", "ุงูุญูู", "ุงูููุณ"], 
    associatedHouse: 9,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฃูููุฉ ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงูุณุจู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุขุฎุฑ", abjad: 541, meaning: "ุงูุจุงูู ุจุฐุงุชู", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุณูู", "ุงูุฌุฏู"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุจูุงุก ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงูุฃุซุฑ ุงูุฏุงุฆู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุธุงูุฑ", abjad: 1006, meaning: "ุงูุธุงูุฑ ุจุฐุงุชู", 
    associatedForms: ["ุงูุดูุณ", "ุงูุฏูู", "ุงูููุณ"], 
    associatedHouse: 11,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุธููุฑ ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงููุถูุญ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุจุงุทู", abjad: 52, meaning: "ุงูุฎูู ุนู ุงูุฃุจุตุงุฑ", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุณูู", "ุงูุณุฑุทุงู"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุจุงุทู ูู ุชูููุฑู ูุณุชุฌุฏ ุงูุนูู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุงูู", abjad: 47, meaning: "ุงููุชููู ุฃููุฑ ุฎููู", 
    associatedForms: ["ุงูุฌุฏู", "ุงูุซูุฑ", "ุงูุณูู"], 
    associatedHouse: 2,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูููุงูุฉ ูู ูุฑุงุฑุงุชู ูุณุชุฌุฏ ุงูุชูููู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุชุนุงูู", abjad: 162, meaning: "ุงููุชุนุงูู ุนู ุตูุงุช ุงููุฎููููู", 
    associatedForms: ["ุงูุดูุณ", "ุงูุฌุฏู", "ุงูููุณ"], 
    associatedHouse: 9,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุนูู ูู ููุชู ูุณุชุฌุฏ ุงูุฑูุนุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุจุฑ", abjad: 202, meaning: "ุงูููุนู ุจุงูุจุฑ", 
    associatedForms: ["ุงูุณูู", "ุงูุญูุช", "ุงูุณุฑุทุงู"], 
    associatedHouse: 4,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุจุฑู ูู ุชุนุงููู ูุณุชุฌุฏ ุงูุฑุถุง ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุชูุงุจ", abjad: 409, meaning: "ุงูุฐู ููุจู ุงูุชูุจุฉ", 
    associatedForms: ["ุงูุณูู", "ุงูุนูุฑุจ", "ุงูุณุฑุทุงู"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุชูุจุฉ ูู ุฃุฎุทุงุฆู ูุณุชุฌุฏ ุงูุนูู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูููุชูู", abjad: 605, meaning: "ุงูุฐู ููุชูู ูู ุงูุธุงูููู", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุฃุณุฏ", "ุงูููุณ"], 
    associatedHouse: 5,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุงูุชูุงู ูู ุฃุฎุทุงุฆู ูุณุชุฌุฏ ุงูุชุตุญูุญ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุนูู", abjad: 156, meaning: "ุงูุนูู ุนู ุงูุฐููุจ", 
    associatedForms: ["ุงูุณูู", "ุงูุญูุช", "ุงูุณุฑุทุงู"], 
    associatedHouse: 12,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุนูู ูู ุชุนุงููู ูุณุชุฌุฏ ุงููุบูุฑุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฑุคูู", abjad: 281, meaning: "ุงูุฑุญูู ุจุงูุนุจุงุฏ", 
    associatedForms: ["ุงูุณูู", "ุงูุญูุช", "ุงูุณุฑุทุงู"], 
    associatedHouse: 4,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฑุฃูุฉ ูู ุชุนุงููู ูุณุชุฌุฏ ุงููุญุจุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ูุงูู ุงูููู", abjad: 136, meaning: "ูุงูู ุฌููุน ุงูููุงูู", 
    associatedForms: ["ุงูุดูุณ", "ุงูุฌุฏู", "ุงูุฃุณุฏ"], 
    associatedHouse: 10,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูููู ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงูุณูุทุฑุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุฐู ุงูุฌูุงู ูุงูุฅูุฑุงู", abjad: 310, meaning: "ุฐู ุงูุนุธูุฉ ูุงูุฅูุฑุงู", 
    associatedForms: ["ุงูุดูุณ", "ุงูุฌุฏู", "ุงูุฃุณุฏ"], 
    associatedHouse: 10,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฌูุงู ูู ุนุจุงุฏุชู ูุณุชุฌุฏ ุงููุฑุงูุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูููุณุท", abjad: 204, meaning: "ุงูุนุงุฏู ูู ุญููู", 
    associatedForms: ["ุงูููุฒุงู", "ุงูุซูุฑ", "ุงูุฌุฏู"], 
    associatedHouse: 2,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุณุท ูู ุฃูุนุงูู ูุณุชุฌุฏ ุงูุนุฏู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฌุงูุน", abjad: 56, meaning: "ุงูุฌุงูุน ูุฎููู ููู ุงูููุงูุฉ", 
    associatedForms: ["ุงูุญูู", "ุงูุฏูู", "ุงูููุณ"], 
    associatedHouse: 9,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฌูุน ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงูุงุชุณุงู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุบูู", abjad: 1045, meaning: "ุงูุบูู ุนู ุฌููุน ุฎููู", 
    associatedForms: ["ุงูุฌุฏู", "ุงูุซูุฑ", "ุงูุณูู"], 
    associatedHouse: 2,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุบูู ูู ููุณู ูุณุชุฌุฏ ุงูุงุณุชุบูุงุก ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุบูู", abjad: 109, meaning: "ุงููุบูู ุนุจุงุฏู", 
    associatedForms: ["ุงูุณูู", "ุงูููุณ", "ุงูุฏูู"], 
    associatedHouse: 11,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุบูู ูู ุฑุฒูู ูุณุชุฌุฏ ุงูููุงูุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุงูุน", abjad: 134, meaning: "ุงููุงูุน ูู ุงูุดุฑ", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุซูุฑ", "ุงูุฌุฏู"], 
    associatedHouse: 10,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูููุน ูู ุฃุฎุทุงุฆู ูุณุชุฌุฏ ุงูุญูุธ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุถุงุฑ", abjad: 208, meaning: "ุงูุถุงุฑ ุจุงููุงุณ ุจูุนุตูุชูู", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุฃุณุฏ", "ุงูููุณ"], 
    associatedHouse: 5,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุถุฑ ูู ุฃุฎุทุงุฆู ูุณุชุฌุฏ ุงูุชุตุญูุญ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุงูุน", abjad: 156, meaning: "ุงููุงูุน ููุนุจุงุฏ", 
    associatedForms: ["ุงูุณูู", "ุงูููุณ", "ุงูุฏูู"], 
    associatedHouse: 11,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูููุน ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงููุงุฆุฏุฉ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูููุฑ", abjad: 256, meaning: "ุงููููุฑ ูููููุจ", 
    associatedForms: ["ุงูุดูุณ", "ุงูุฏูู", "ุงูููุณ"], 
    associatedHouse: 11,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูููุฑ ูู ูููู ูุณุชุฌุฏ ุงููุถูุญ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุงุฏู", abjad: 20, meaning: "ุงููุงุฏู ุฅูู ุงูุตุฑุงุท ุงููุณุชููู", 
    associatedForms: ["ุงูุญูู", "ุงูููุณ", "ุงูุฏูู"], 
    associatedHouse: 9,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุฏุงูุฉ ูู ุฏุฑุจู ูุณุชุฌุฏ ุงูุตูุงุจ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุจุฏูุน", abjad: 62, meaning: "ุงูุฐู ูุง ุดุจูู ูู", 
    associatedForms: ["ุงูุญูู", "ุงูุฏูู", "ุงูุณูู"], 
    associatedHouse: 12,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุงุจุฏุงุน ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงูุชููุฒ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุจุงูู", abjad: 66, meaning: "ุงูุจุงูู ุจุนุฏ ููุงุก ุงูุฎูู", 
    associatedForms: ["ุงูุดูุณ", "ุงูุฌุฏู", "ุงูุนูุฑุจ"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุจูุงุก ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงูุฃุซุฑ ุงูุฏุงุฆู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงููุงุฑุซ", abjad: 707, meaning: "ุงููุงุฑุซ ูู ฤแบฅt ูุงูุณููุงุช", 
    associatedForms: ["ุงูุนูุฑุจ", "ุงูุณูู", "ุงูุฌุฏู"], 
    associatedHouse: 8,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงููุงุฑุซ ูู ุฃุนูุงูู ูุณุชุฌุฏ ุงูุฃุซุฑ ุงูุฏุงุฆู ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุฑุดูุฏ", abjad: 514, meaning: "ุงููุงุฏู ุฅูู ุงูุตูุงุจ", 
    associatedForms: ["ุงูุฏูู", "ุงูุฌูุฒุงุก", "ุงูุณูู"], 
    associatedHouse: 12,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุฑุดุงุฏ ูู ูุฑุงุฑุงุชู ูุณุชุฌุฏ ุงูุตูุงุจ ูู ูู ุชุญุฑูุงุชู" },
  { name: "ุงูุตุจูุฑ", abjad: 298, meaning: "ุงูุฐู ูุง ูุณุชุนุฌู ุจุงูุนูุงุจ", 
    associatedForms: ["ุงูุฌุฏู", "ุงูุซูุฑ", "ุงูุณูู"], 
    associatedHouse: 2,
    secretMessage: "ุงูุณุฑ: ุงุทูุจ ุงูุตุจุฑ ูู ูุตุงุฆุจู ูุณุชุฌุฏ ุงูุนูู ูู ูู ุชุญุฑูุงุชู" }
];

// ุงูุณูุฑ ุงููุฑุขููุฉ ูุน ุฑุจุทูุง ุจุงูุฎุงูุงุช
const QURAN_SURAH = [
  { number: 1, name: "ุงููุงุชุญุฉ", verses: 7, type: "ูููุฉ", 
    associatedSquares: ["a1", "h8", "e4"], 
    geomanticSignificance: "ุงูุฑุจุท ุจูู ุงูุจุฏุงูุงุช ูุงููุฑุต ุงูุฌุฏูุฏุฉ" },
  { number: 2, name: "ุงูุจูุฑุฉ", verses: 286, type: "ูุฏููุฉ", 
    associatedSquares: ["b1", "g8", "d4"], 
    geomanticSignificance: "ุงูุงุณุชูุฑุงุฑ ุงููุงูู ูุงูุฑูุญู" },
  { number: 3, name: "ุขู ุนูุฑุงู", verses: 200, type: "ูุฏููุฉ", 
    associatedSquares: ["c1", "f8", "c4"], 
    geomanticSignificance: "ุงูุนูุงูุงุช ุงูุนุงุฆููุฉ ูุงูุดุฑุงูุงุช" },
  { number: 4, name: "ุงููุณุงุก", verses: 176, type: "ูุฏููุฉ", 
    associatedSquares: ["d1", "e8", "b4"], 
    geomanticSignificance: "ุงูุจูุช ูุงูุฃุณุฑุฉ ูุงูุฌุฐูุฑ" },
  { number: 5, name: "ุงููุงุฆุฏุฉ", verses: 120, type: "ูุฏููุฉ", 
    associatedSquares: ["e1", "d8", "a4"], 
    geomanticSignificance: "ุงูุฅุจุฏุงุน ูุงููุฑุญ ูุชุญููู ุงูุฑุบุจุงุช" },
  { number: 6, name: "ุงูุฃูุนุงู", verses: 165, type: "ูููุฉ", 
    associatedSquares: ["f1", "c8", "h4"], 
    geomanticSignificance: "ุงูุตุญุฉ ูุงูุนูู ูุงูุฑูุชูู ุงููููู" },
  { number: 7, name: "ุงูุฃุนุฑุงู", verses: 206, type: "ูููุฉ", 
    associatedSquares: ["g1", "b8", "g4"], 
    geomanticSignificance: "ุงูุนูุงูุงุช ูุงูุดุฑุงูุงุช ูุงูุนููุฏ" },
  { number: 8, name: "ุงูุฃููุงู", verses: 75, type: "ูุฏููุฉ", 
    associatedSquares: ["h1", "a8", "f4"], 
    geomanticSignificance: "ุงูุชุญููุงุช ูุงูููุงุฑุฏ ุงููุดุชุฑูุฉ" },
  { number: 9, name: "ุงูุชูุจุฉ", verses: 129, type: "ูุฏููุฉ", 
    associatedSquares: ["a2", "h7", "e5"], 
    geomanticSignificance: "ุงูุณูุฑ ูุงูููุณูุฉ ูุงูุชุนููู ุงูุนุงูู" },
  { number: 10, name: "ูููุณ", verses: 109, type: "ูููุฉ", 
    associatedSquares: ["b2", "g7", "d5"], 
    geomanticSignificance: "ุงูุนูู ูุงูุณูุนุฉ ูุงูุทููุญ" },
  { number: 11, name: "ููุฏ", verses: 123, type: "ูููุฉ", 
    associatedSquares: ["c2", "f7", "c5"], 
    geomanticSignificance: "ุงูุฃุตุฏูุงุก ูุงูุฃูุฏุงู ูุงูุฑุบุจุงุช" },
  { number: 12, name: "ููุณู", verses: 111, type: "ูููุฉ", 
    associatedSquares: ["d2", "e7", "b5"], 
    geomanticSignificance: "ุงูุฃุณุฑุงุฑ ูุงูุฎูู ูุงูุฑูุญุงููุฉ" },
  { number: 112, name: "ุงูุฅุฎูุงุต", verses: 4, type: "ูููุฉ", 
    associatedSquares: ["d1", "e8", "c3"], 
    geomanticSignificance: "ุงูุชูุญูุฏ ูุงููุถูุญ ูู ุงููุฑุงุฑุงุช" }
];

/* ---------- ุจูุงูุงุช ูุจุฏุฆูุฉ (ูุงุจูุฉ ููุชุนุฏูู) ---------- */
/* ูู ุตู: [bits (ููุงุณู: 1=ูุฑุฏ), arabicName, latin, element, planet, sign, quality, note] */
const DEFAULT_FIGS = [
  ['1111','ุงูุทุฑูู/ุงูุงูุตุฑุงู','Via','ูุงุก','ุงูููุฑ','โ','ุชุบููุฑ','ุญุฑูุฉ ูุชุญููู'],
  ['0000','ุงุฌุชูุงุน','Conjunctio','ููุงุก','ุนุทุงุฑุฏ','โ','ุงุชุตุงู','ุฑุจุท ููุตู'],
  ['1010','ุญุฒู','Tristitia','ุชุฑุงุจ','ุฒุญู','โ','ูุจูุท','ุซูู ูุซุจุงุช'],
  ['0101','ูุฑุญ','Laetitia','ูุงุฑ','ุงููุดุชุฑู','โ','ูุดุงุท','ูุฑุญ ูุตุนูุฏ'],
  ['1000','ุงูุนูุงุจ','Acquisitio','ููุงุก','ุงููุดุชุฑู','โ','ููุงุก','ุฒูุงุฏุฉ ูุฑุจุญ'],
  ['0111','ุงููุจุงุถ','Amissio','ูุงุก','ุงูุฒูุฑุฉ','โ','ููุต','ููุฏ ูุฎุณุงุฑุฉ'],
  ['1100','ุณุฌู','Carcer','ุชุฑุงุจ','ุฒุญู','โ','ููุฏ','ุญุฏูุฏ ูููุน'],
  ['0011','ุณูุงู','Albus','ููุงุก','ุนุทุงุฑุฏ','โ','ููุงุก','ุงุนุชุฏุงู ูุนูู'],
  ['1011','ุทุฑูู ูุณูุฑ','Puer','ูุงุฑ','ุงููุฑูุฎ','โ','ุญุฏุฉ','ุฌุฑุฃุฉ ูุญุณู'],
  ['0100','ุงููุฑุฃุฉ','Puella','ูุงุก','ุงูุฒูุฑุฉ','โ','ูุทุงูุฉ','ููู ูุฌูุงู'],
  ['0010','ุฌูููุฑ','Populus','ูุงุก','ุงูููุฑ','โ','ุฌูุน','ุฌูุงุนุฉ ูุนุงูุฉ'],
  ['1101','ุงูุดูุฎ','Rubeus','ูุงุฑ','ุงููุฑูุฎ','โ','ุงุถุทุฑุงุจ','ุงููุนุงู ูุฎุทุฑ'],
  ['0110','ุงูุฑุฃุณ','Caput D.','ุชุฑุงุจ','ุงูุนูุฏุฉ ุงูุดูุงููุฉ','โ','ุจุฏุก','ุงุจุชุฏุงุก ูุฏุฎูู'],
  ['1001','ุงูุฐูุจ','Cauda D.','ูุงุฑ','ุงูุนูุฏุฉ ุงูุฌููุจูุฉ','โ','ุฎุชุงู','ุงูุตุฑุงู ูุฎุฑูุฌ'],
  ['1110','ููุฑุชูููุง ุงููุจุฑู','Fortuna Major','ูุงุฑ','ุงูุดูุณ','โ','ููุฉ','ูุตุฑ ูุซุจุงุช'],
  ['0001','ููุฑุชูููุง ุงูุตุบุฑู','Fortuna Minor','ูุงุฑ','ุงูููุฑ','โ','ุนุงุจุฑ','ููุฉ ูุคูุชุฉ']
];

// ุชุนุฑูู ุฃุดูุงู ุงูุฑูู ุงูู 16 ูุน ุชูุงุตูู ุฅุถุงููุฉ
const RUMAL_FORMS = [
  { 
    name: "ุงูุญูู", 
    pattern: [1, 1, 1, 1], 
    meaning: "ุจุฏุงูุฉ ุฌุฏูุฏุฉุ ููุฉุ ุทููุญ",
    element: "ูุงุฑู",
    planet: "ุงููุฑูุฎ",
    house: "ุงูุจูุช ุงูุฃูู: ุดุฎุตูุฉ ุงููุฑุฏ ูุฃูุนุงูู",
    message: "ุงูููุช ููุงุณุจ ูุจุฏุก ูุดุงุฑูุน ุฌุฏูุฏุฉุ ุฃุธูุฑ ุงูุดุฌุงุนุฉ ููุงุฌู ุงูุชุญุฏูุงุชุ ุงุนุชูุฏ ุนูู ุทุงูุชู ุงูุฏุงุฎููุฉ ูุชุญููู ุงูุฃูุฏุงู"
  },
  { 
    name: "ุงูุซูุฑ", 
    pattern: [2, 1, 1, 1], 
    meaning: "ุงุณุชูุฑุงุฑุ ุตุจุฑุ ูุซุงุจุฑุฉ",
    element: "ุชุฑุงุจู",
    planet: "ุงูุฒูุฑุฉ",
    house: "ุงูุจูุช ุงูุซุงูู: ุงูุฃููุงู ูุงูููุงุฑุฏ",
    message: "ุฑูุฒ ุนูู ุจูุงุก ุฃุณุงุณ ูุชููุ ูู ุตุจูุฑุงู ูุน ุฃููุงููุ ุงุณุชุซูุฑ ูู ุงูููุงุฑุฏ ุงูุชู ุชุฏูู ุทูููุงูุ ุชุฌูุจ ุงูุงุณุชุนุฌุงู"
  },
  { 
    name: "ุงูุฌูุฒุงุก", 
    pattern: [1, 2, 1, 1], 
    meaning: "ุงุชุตุงูุ ุชูุงุตูุ ุชุนูู",
    element: "ููุงุฆู",
    planet: "ุนุทุงุฑุฏ",
    house: "ุงูุจูุช ุงูุซุงูุซ: ุงูุชุนููู ูุงูุงุชุตุงู",
    message: "ุงุณุชุบู ููุงุฑุงุชู ุงูุชูุงุตููุฉุ ุงุจุญุซ ุนู ูุนุฑูุฉ ุฌุฏูุฏุฉุ ุชูุงุตู ูุน ุงูุขุฎุฑููุ ุงูุชุจ ูุดุงุฑู ุฃููุงุฑูุ ุชุฌูุจ ุงูุชุดุชุช"
  },
  { 
    name: "ุงูุณุฑุทุงู", 
    pattern: [2, 2, 1, 1], 
    meaning: "ุนุงุทูุฉุ ุฐุงูุฑุฉุ ุญูุงูุฉ",
    element: "ูุงุฆู",
    planet: "ุงูููุฑ",
    house: "ุงูุจูุช ุงูุฑุงุจุน: ุงูููุฒู ูุงูุฃุณุฑุฉ",
    message: "ุฑูุฒ ุนูู ุนูุงูุงุชู ุงูุฃุณุฑูุฉุ ุงูุชู ุจุจูุฆุชู ุงูููุฒููุฉุ ุงุณุชุฎุฏู ุฐุงูุฑุชู ููุงุณุชูุงุฏุฉ ูู ุงูุฏุฑูุณ ุงูุณุงุจูุฉุ ุงุจุญุซ ุนู ุงูุฃูุงู ุงูุนุงุทูู"
  },
  { 
    name: "ุงูุฃุณุฏ", 
    pattern: [1, 1, 2, 1], 
    meaning: "ููุงุฏูุฉุ ุฅุจุฏุงุนุ ุซูุฉ",
    element: "ูุงุฑู",
    planet: "ุงูุดูุณ",
    house: "ุงูุจูุช ุงูุฎุงูุณ: ุงูุฅุจุฏุงุน ูุงููุฑุญ",
    message: "ุงุธูุฑ ุฅุจุฏุงุนูุ ุงุซู ุจููุณูุ ุงุณุชูุชุน ุจููุชูุ ุชููู ุงูููุงุฏุฉ ูู ุงููุดุงุฑูุน ุงูุฅุจุฏุงุนูุฉุ ุชุฌูุจ ุงูุบุฑูุฑ"
  },
  { 
    name: "ุงูุนุฐุฑุงุก", 
    pattern: [2, 1, 2, 1], 
    meaning: "ุชูุธููุ ุชุญูููุ ุฏูุฉ",
    element: "ุชุฑุงุจู",
    planet: "ุนุทุงุฑุฏ",
    house: "ุงูุจูุช ุงูุณุงุฏุณ: ุงูุนูู ูุงูุตุญุฉ",
    message: "ุฑูุฒ ุนูู ุงูุชูุงุตููุ ูุธู ููุชูุ ุงูุชู ุจุตุญุชูุ ุชุญูู ุงููุดุงูู ุจุฏูุฉุ ุชุฌูุจ ุงูููุงููุฉ ุงูููุฑุทุฉ"
  },
  { 
    name: "ุงูููุฒุงู", 
    pattern: [1, 2, 2, 1], 
    meaning: "ุชูุงุฒูุ ุนุฏุงูุฉุ ุฏุจูููุงุณูุฉ",
    element: "ููุงุฆู",
    planet: "ุงูุฒูุฑุฉ",
    house: "ุงูุจูุช ุงูุณุงุจุน: ุงูุนูุงูุงุช ูุงูุดุฑุงูุงุช",
    message: "ุงุจุญุซ ุนู ุงูุชูุงุฒู ูู ุนูุงูุงุชูุ ูู ุนุงุฏูุงูุ ุงุณุชุฎุฏู ููุงุฑุงุชู ุงูุฏุจูููุงุณูุฉุ ุชุฌูุจ ุชุฌูุจ ุงูููุงุฌูุงุช"
  },
  { 
    name: "ุงูุนูุฑุจ", 
    pattern: [2, 2, 2, 1], 
    meaning: "ููุฉุ ุชุญููุ ุบููุถ",
    element: "ูุงุฆู",
    planet: "ุงููุฑูุฎ",
    house: "ุงูุจูุช ุงูุซุงูู: ุงูุชุญููุงุช ูุงูููุงุฑุฏ ุงููุดุชุฑูุฉ",
    message: "ุงุณุชุนุฏ ููุชุบููุฑุงุช ุงูุนูููุฉุ ุงุจุญุซ ุนู ุงูุญูููุฉ ุงููุงููุฉุ ุชุฃููู ูุน ุงูุชุญููุงุชุ ุชุฌูุจ ุงูุชูุงุนุจ ุจุงูุขุฎุฑูู"
  },
  { 
    name: "ุงูููุณ", 
    pattern: [1, 1, 1, 2], 
    meaning: "ุงุณุชูุดุงูุ ุชูุงุคูุ ุญููุฉ",
    element: "ูุงุฑู",
    planet: "ุงููุดุชุฑู",
    house: "ุงูุจูุช ุงูุชุงุณุน: ุงูุณูุฑ ูุงูููุณูุฉ",
    message: "ุงุณุชูุดู ุขูุงูุงู ุฌุฏูุฏุฉุ ุงุจุญุซ ุนู ุงูุญููุฉุ ุชูุงุฆู ุจุงููุณุชูุจูุ ุชุฌูุจ ุงูุชุณุฑุน ูู ุงูุงุณุชูุชุงุฌุงุช"
  },
  { 
    name: "ุงูุฌุฏู", 
    pattern: [2, 1, 1, 2], 
    meaning: "ุทููุญุ ุงูุถุจุงุทุ ูุฌุงุญ",
    element: "ุชุฑุงุจู",
    planet: "ุฒุญู",
    house: "ุงูุจูุช ุงูุนุงุดุฑ: ุงูุนูู ูุงูุณูุนุฉ",
    message: "ุฎุทุท ูุทููุญุงุชูุ ูู ููุถุจุทุงูุ ุงุนูู ุจุฌุฏ ูุชุญููู ุงููุฌุงุญุ ุงูุชู ุจุณูุนุชู ุงูููููุฉ"
  },
  { 
    name: "ุงูุฏูู", 
    pattern: [1, 2, 1, 2], 
    meaning: "ุงุจุชูุงุฑุ ุชุญุฑุฑุ ุชูุฏู",
    element: "ููุงุฆู",
    planet: "ุฒุญู",
    house: "ุงูุจูุช ุงูุญุงุฏู ุนุดุฑ: ุงูุตุฏุงูุงุช ูุงูุฃูุฏุงู",
    message: "ุงุจุชูุฑ ุญูููุงู ุฌุฏูุฏุฉุ ุชุญุฑุฑ ูู ุงููููุฏุ ุงุจุญุซ ุนู ุงูุชูุฏูุ ุชูุงุตู ูุน ุฃุดุฎุงุต ูุดุงุฑูููู ุฃูุฏุงูู"
  },
  { 
    name: "ุงูุญูุช", 
    pattern: [2, 2, 1, 2], 
    meaning: "ุญุฏุณุ ุฅุจุฏุงุนุ ุฑูุญุงููุฉ",
    element: "ูุงุฆู",
    planet: "ุงูููุฑ",
    house: "ุงูุจูุช ุงูุซุงูู ุนุดุฑ: ุงูุฎูุงุก ูุงูุฑูุญุงููุฉ",
    message: "ุงุณุชุนู ุจุญุฏุณูุ ุงุจุญุซ ุนู ุงูุนูู ุงูุฑูุญูุ ุงูุชุจู ููุฅุดุงุฑุงุช ุงูุฎููุฉุ ุชุฌูุจ ุงููุฑูุจ ูู ุงููุงูุน"
  },
  { 
    name: "ุงูุดูุณ", 
    pattern: [1, 1, 2, 2], 
    meaning: "ููุฑุ ุญูููุฉุ ุงูุชุตุงุฑ",
    element: "ูุงุฑู",
    planet: "ุงูุดูุณ",
    house: "ุงูุจูุช ุงูุฃูู (ููุฑุฑ): ุงูููุฉ ุงูุฐุงุชูุฉ",
    message: "ุงุธูุฑ ุทุงูุชู ุงูุฅูุฌุงุจูุฉุ ุงุจุญุซ ุนู ุงูููุฑ ูู ูู ููููุ ุงุญุชูู ุจุงูุงูุชุตุงุฑุงุชุ ูู ูุตุฏุฑ ุฅููุงู ููุขุฎุฑูู"
  },
  { 
    name: "ุงูููุฑ", 
    pattern: [2, 1, 2, 2], 
    meaning: "ุญุฏุณุ ุชุฃุซูุฑุ ุชุบููุฑ",
    element: "ูุงุฆู",
    planet: "ุงูููุฑ",
    house: "ุงูุจูุช ุงูุฑุงุจุน (ููุฑุฑ): ุงููุดุงุนุฑ ูุงูุจูุช",
    message: "ุงุณุชุนู ุจุญุฏุณูุ ุชุฃููู ูุน ุงูุชุบููุฑุงุชุ ุงูุชู ุจูุดุงุนุฑูุ ุงุจุญุซ ุนู ุงูุฃูุงู ุงูุฏุงุฎูู"
  },
  { 
    name: "ุงููุฌู", 
    pattern: [1, 2, 2, 2], 
    meaning: "ุฅููุงูุ ุชุฃููุ ุชูุฌูู",
    element: "ููุงุฆู",
    planet: "ุงูุดูุณ",
    house: "ุงูุจูุช ุงูุญุงุฏู ุนุดุฑ (ููุฑุฑ): ุงูุฃุญูุงู ูุงูุขูุงู",
    message: "ุงุชุจุน ุฃุญูุงููุ ุงุจุญุซ ุนู ุงูุชุฃูู ูู ุญูุงุชูุ ุงุทูุจ ุงูุชูุฌููุ ูู ูุตุฏุฑ ุฅููุงู ููุขุฎุฑูู"
  },
  { 
    name: "ุงูุณูู", 
    pattern: [2, 2, 2, 2], 
    meaning: "ุญุณูุ ููุฉุ ุชุญุฏู",
    element: "ูุงุฑู",
    planet: "ุงููุฑูุฎ",
    house: "ุงูุจูุช ุงูุณุงุฏุณ (ููุฑุฑ): ุงูุชุญุฏูุงุช ุงูููููุฉ",
    message: "ูู ุญุงุณูุงู ูู ูุฑุงุฑุงุชูุ ุงุณุชุฎุฏู ููุชู ุจุญููุฉุ ูุงุฌู ุงูุชุญุฏูุงุชุ ุชุฌูุจ ุงูุนูู ูุงูุนุฏูุงููุฉ"
  }
];

// ุชุนุฑูู ุงูููุงุฒู ุงูู 12
const HOUSES = [
  { number: 1, name: "ุงูุฐุงุช", element: "ูุงุฑู", meaning: "ุงูุดุฎุตูุฉุ ุงููุธูุฑุ ุงูุจุฏุงูุงุช" },
  { number: 2, name: "ุงูุฃููุงู", element: "ุชุฑุงุจู", meaning: "ุงูููุงุฑุฏุ ุงูุซุฑูุฉุ ุงูููู" },
  { number: 3, name: "ุงูุงุชุตุงู", element: "ููุงุฆู", meaning: "ุงูุชุนููุ ุงูุฃุฎุจุงุฑุ ุงูุดูููุฉ" },
  { number: 4, name: "ุงูุจูุช", element: "ูุงุฆู", meaning: "ุงูุนุงุฆูุฉุ ุงูุฌุฐูุฑุ ุงูุณูู" },
  { number: 5, name: "ุงูุฅุจุฏุงุน", element: "ูุงุฑู", meaning: "ุงููุฑุญุ ุงูุฃุทูุงูุ ุงูุฅุจุฏุงุน" },
  { number: 6, name: "ุงูุตุญุฉ", element: "ุชุฑุงุจู", meaning: "ุงูุนููุ ุงูุฑูุชููุ ุงูุตุญุฉ" },
  { number: 7, name: "ุงูุดุฑุงูุฉ", element: "ููุงุฆู", meaning: "ุงูุนูุงูุงุชุ ุงูุฒูุงุฌุ ุงูุนููุฏ" },
  { number: 8, name: "ุงูุชุญูู", element: "ูุงุฆู", meaning: "ุงูููุชุ ุงูููุฑุงุซุ ุงูุชุญููุงุช" },
  { number: 9, name: "ุงูุณูุฑ", element: "ูุงุฑู", meaning: "ุงูุณูุฑุ ุงูููุณูุฉุ ุงูุชุนููู ุงูุนุงูู" },
  { number: 10, name: "ุงูุณูุนุฉ", element: "ุชุฑุงุจู", meaning: "ุงูุนููุ ุงูููุงูุฉุ ุงูุทููุญ" },
  { number: 11, name: "ุงูุฃูุฏุงู", element: "ููุงุฆู", meaning: "ุงูุฃุตุฏูุงุกุ ุงูุฃูุฏุงูุ ุงูุฑุบุจุงุช" },
  { number: 12, name: "ุงูุฎูู", element: "ูุงุฆู", meaning: "ุงูุฃุณุฑุงุฑุ ุงูุฎููุ ุงูุฑูุญุงููุฉ" }
];

// ุชุนุฑูู ุงูููุงุฒู ุงูููุฑูุฉ ุงูู 28
const MOON_MANSIONS = [
  { name: "ุงูุดุฑุทุงู", letter: "ุฃ", angle: 0, meaning: "ุจุฏุงูุฉ ุงููุดุงุฑูุน ุงูุฌุฏูุฏุฉ" },
  { name: "ุงูุจุทูู", letter: "ุจ", angle: 12.85, meaning: "ุงูุชูุงุฒู ุงูุฑูุญู" },
  { name: "ุงูุซุฑูุง", letter: "ุฌ", angle: 25.71, meaning: "ุงูุงุชุตุงู ุงููููู" },
  { name: "ุงูุฏุจุฑุงู", letter: "ุฏ", angle: 38.57, meaning: "ุงูููุฉ ุงูุฏุงุฎููุฉ" },
  { name: "ุงูููุนุฉ", letter: "ู", angle: 51.43, meaning: "ุงูุญูุงูุฉ ุงูุฅูููุฉ" },
  { name: "ุงูููุนุฉ", letter: "ู", angle: 64.28, meaning: "ุงูุฑุญูุฉ ุงูุณูุงููุฉ" },
  { name: "ุงูุฐุฑุงุน", letter: "ุฒ", angle: 77.14, meaning: "ุงูููุฉ ุงูุฌุณุฏูุฉ" },
  { name: "ุงููุซุฑุฉ", letter: "ุญ", angle: 90.0, meaning: "ุงูุจุตูุฑุฉ ุงููุงูุฐุฉ" },
  { name: "ุงูุทุฑูุฉ", letter: "ุท", angle: 102.85, meaning: "ุงูุชุฌุฏูุฏ ุงูุฑูุญู" },
  { name: "ุงูุฌุจูุฉ", letter: "ู", angle: 115.71, meaning: "ุงูุดุฌุงุนุฉ ุงูุฃุฏุจูุฉ" },
  { name: "ุงูุฒุจุฑุฉ", letter: "ู", angle: 128.57, meaning: "ุงูุญููุฉ ุงูุนูููุฉ" },
  { name: "ุงูุตุฑูุฉ", letter: "ู", angle: 141.43, meaning: "ุงูุชุบููุฑ ุงูุฅูุฌุงุจู" },
  { name: "ุงูุนูุงุก", letter: "ู", angle: 154.28, meaning: "ุงูููุงุฏุฉ ุงูุญูููุฉ" },
  { name: "ุงูุณูุงู", letter: "ู", angle: 167.14, meaning: "ุงูุนุฏุงูุฉ ุงูููููุฉ" },
  { name: "ุงูุบูุฑ", letter: "ุณ", angle: 180.0, meaning: "ุงููุบูุฑุฉ ุงูุฅูููุฉ" },
  { name: "ุงูุฒุจุงูุง", letter: "ุน", angle: 192.85, meaning: "ุงูุชูุงุฒู ุงููุงุฏู" },
  { name: "ุงูุฅูููู", letter: "ู", angle: 205.71, meaning: "ุงูุชุงุฌ ุงูุฑูุญู" },
  { name: "ุงูููุจ", letter: "ุต", angle: 218.57, meaning: "ูุฑูุฒ ุงูุทุงูุฉ" },
  { name: "ุงูุดููุฉ", letter: "ู", angle: 231.43, meaning: "ุงูุชุญูู ุงููุจูุฑ" },
  { name: "ุงููุนุงุฆู", letter: "ุฑ", angle: 244.28, meaning: "ุงูุจุฑูุงุช ุงูุณูุงููุฉ" },
  { name: "ุงูุจูุฏุฉ", letter: "ุด", angle: 257.14, meaning: "ุงูุงุณุชูุฑุงุฑ ุงูุฃุฑุถู" },
  { name: "ุณุนุฏ ุงูุฐุงุจุญ", letter: "ุช", angle: 270.0, meaning: "ุงูุชุถุญูุฉ ุงูุฅูุฌุงุจูุฉ" },
  { name: "ุณุนุฏ ุจูุน", letter: "ุซ", angle: 282.85, meaning: "ุงููุจูู ุงูุฅููู" },
  { name: "ุณุนุฏ ุงูุณุนูุฏ", letter: "ุฎ", angle: 295.71, meaning: "ุงูุณุนุงุฏุฉ ุงูุฏุงุฆูุฉ" },
  { name: "ุณุนุฏ ุงูุฃุฎุจูุฉ", letter: "ุฐ", angle: 308.57, meaning: "ุงูุฃุณุฑุงุฑ ุงูููููุฉ" },
  { name: "ุงูููุฏู", letter: "ุถ", angle: 321.43, meaning: "ุงูุจุฏุงูุงุช ุงูุฌุฏูุฏุฉ" },
  { name: "ุงููุคุฎุฑ", letter: "ุธ", angle: 334.28, meaning: "ุฅููุงุก ุงููุฑุงุญู" },
  { name: "ุงูุฑุดุงุก", letter: "ุบ", angle: 347.14, meaning: "ุงูุฑุดุฏ ุงูุฅููู" }
];

// ุชุนุฑูู ุงูุชุฎุช (ุงูุจูุด) ูุน ุฅุดุงุฑุงุชู ูุณูุฑู ูุฐูุฑู ูุชูุฌููู
const TAKHTS = [
  {
    id: 1,
    name: "ุงูุชุฎุช ุงูุฃูู",
    abbreviation: "ุช1",
    description: "ููุฑูุฒ ุฅูู ุงูุจุฏุงูุฉ ูุงูุจุฏุก ูู ุงูุฃุดูุงุก",
    signs: ["ุงูุญุฑูุฉ ุงูุฌุฏูุฏุฉ", "ุงูุงุจุชุณุงูุฉ", "ุงูุงุณุชุนุฏุงุฏ"],
    surahs: ["ุงููุงุชุญุฉ", "ุงูุจูุฑุฉ"],
    adhkar: ["ุงูููู ุงุฌุนููู ูู ุงูุฐูู ูุจุฏุฃูู ุจุฎูุฑ", "ุงูููู ุงุฑุฒููู ุงูุจุฏุงูุฉ ุงูุตุงูุญุฉ"],
    guidance: "ุงุจุฏุฃ ูู ุนูู ุจุฐูุฑ ุงููู ูุงุจุฏุฃ ุจุฎุทูุฉ ุตุบูุฑุฉ",
    associatedHouse: 1
  },
  {
    id: 2,
    name: "ุงูุชุฎุช ุงูุซุงูู",
    abbreviation: "ุช2",
    description: "ููุฑูุฒ ุฅูู ุงูุงุณุชูุฑุงุฑ ูุงูุซุจุงุช",
    signs: ["ุงููุฏูุก", "ุงูุงุณุชูุฑุงุฑ", "ุงูุซุจุงุช"],
    surahs: ["ุขู ุนูุฑุงู", "ุงููุณุงุก"],
    adhkar: ["ุงูููู ุงุฌุนููู ุนูู ุงูุซุจุงุช", "ุงูููู ุซุจุชูู ุนูู ุทุฑููู"],
    guidance: "ูู ุซุงุจุชูุง ูู ุฃูุนุงูู ูุซู ุจุฑุจู",
    associatedHouse: 2
  },
  {
    id: 3,
    name: "ุงูุชุฎุช ุงูุซุงูุซ",
    abbreviation: "ุช3",
    description: "ููุฑูุฒ ุฅูู ุงูุชูุงุตู ูุงูุงุชุตุงู",
    signs: ["ุงูููุงู ุงูุฌููู", "ุงูุงุชุตุงู", "ุงูุตุฏุงูุฉ"],
    surahs: ["ุงููุงุฆุฏุฉ", "ุงูุฃูุนุงู"],
    adhkar: ["ุงูููู ุฒุฏูู ูู ุนููู", "ุงูููู ุณุฏุฏูู ูู ููุงูู"],
    guidance: "ุงุณุชุฎุฏู ููุงูู ููุฎูุฑ ูุงุจูู ุนูุงูุงุช ูููุฉ",
    associatedHouse: 3
  },
  {
    id: 4,
    name: "ุงูุชุฎุช ุงูุฑุงุจุน",
    abbreviation: "ุช4",
    description: "ููุฑูุฒ ุฅูู ุงูุนุงุทูุฉ ูุงูุฐูุฑูุงุช",
    signs: ["ุงูุญุจ", "ุงูุญููู", "ุงูุงูุชูุงู"],
    surahs: ["ุงูุฃูุจูุงุก", "ุงูุฑูู"],
    adhkar: ["ุงูููู ุงุฌุนู ููุจู ููุชูุฆูุง ุจุงูุญุจ", "ุงูููู ุงุฌุนููู ุฃุฐูุฑู ุฏุงุฆููุง"],
    guidance: "ุฑูุฒ ุนูู ุนูุงูุงุชู ุงูุฃุณุฑูุฉ ููู ุญุฑูุตูุง ุนูู ูุดุงุนุฑู",
    associatedHouse: 4
  },
  {
    id: 5,
    name: "ุงูุชุฎุช ุงูุฎุงูุณ",
    abbreviation: "ุช5",
    description: "ููุฑูุฒ ุฅูู ุงูููุงุฏุฉ ูุงูุฅุจุฏุงุน",
    signs: ["ุงูููุงุฏุฉ", "ุงูุฅุจุฏุงุน", "ุงูุซูุฉ"],
    surahs: ["ุงูุจูุฑุฉ", "ุงูุฅุณุฑุงุก"],
    adhkar: ["ุงูููู ุงุฌุนููู ูุงุฆุฏูุง ุตุงูุญูุง", "ุงูููู ุงุฑุฒููู ุงูุฅุจุฏุงุน ูู ุนููู"],
    guidance: "ุงุณุชุฎุฏู ููุชู ุงูุฅุจุฏุงุนูุฉ ููู ูุงุฆุฏูุง ูู ูุดุงุฑูุนู",
    associatedHouse: 5
  },
  {
    id: 6,
    name: "ุงูุชุฎุช ุงูุณุงุฏุณ",
    abbreviation: "ุช6",
    description: "ููุฑูุฒ ุฅูู ุงูุตุญุฉ ูุงูุนูู",
    signs: ["ุงูุตุญุฉ", "ุงูุชูุธูู", "ุงูุฌุฏูุฉ"],
    surahs: ["ุงูุฃูุนุงู", "ุงูุญุฌุฑ"],
    adhkar: ["ุงูููู ุงุฌุนููู ุตุญููุง", "ุงูููู ุงุฌุนููู ูููุธููุง ูู ุนููู"],
    guidance: "ุฑูุฒ ุนูู ุตุญุชู ููุธู ููุชู ุจุนูุงูุฉ",
    associatedHouse: 6
  },
  {
    id: 7,
    name: "ุงูุชุฎุช ุงูุณุงุจุน",
    abbreviation: "ุช7",
    description: "ููุฑูุฒ ุฅูู ุงูุนูุงูุงุช ูุงูุดุฑุงูุงุช",
    signs: ["ุงูุนูุงูุฉ", "ุงูุดุฑุงูุฉ", "ุงูุซูุฉ"],
    surahs: ["ุงูุจูุฑุฉ", "ุงูุญุฌุฑ"],
    adhkar: ["ุงูููู ุงุฌุนููู ุฃุซู ุจุดุฑูุงุฆู", "ุงูููู ุงุฌุนููู ุฃุจูู ุดุฑุงูุงุช ูุงุฌุญุฉ"],
    guidance: "ุงุจูู ุนูุงูุงุช ูููุฉ ููู ููุซูููุง ุจูุง",
    associatedHouse: 7
  },
  {
    id: 8,
    name: "ุงูุชุฎุช ุงูุซุงูู",
    abbreviation: "ุช8",
    description: "ููุฑูุฒ ุฅูู ุงูุชุญูู ูุงูููุงุฑุฏ ุงููุดุชุฑูุฉ",
    signs: ["ุงูุชุญูู", "ุงูุงุณุชุซูุงุฑ", "ุงูุชุฌุฏุฏ"],
    surahs: ["ุงูุฃููุงู", "ุงูุจูุฑุฉ"],
    adhkar: ["ุงูููู ุงุฌุนููู ุฃุณุชุซูุฑ ูู ููุงุฑุฏู", "ุงูููู ุงุฌุนููู ูุงุฏุฑูุง ุนูู ุงูุชุญูู"],
    guidance: "ุงุณุชุนุฏ ููุชุบููุฑุงุช ููู ูุณุชุนุฏูุง ููุงุณุชุซูุงุฑ",
    associatedHouse: 8
  },
  {
    id: 9,
    name: "ุงูุชุฎุช ุงูุชุงุณุน",
    abbreviation: "ุช9",
    description: "ููุฑูุฒ ุฅูู ุงูุณูุฑ ูุงูููุณูุฉ",
    signs: ["ุงูุณูุฑ", "ุงูุชูููุฑ", "ุงูุชุนูู"],
    surahs: ["ุงูุชูุจุฉ", "ุงููุญู"],
    adhkar: ["ุงูููู ุงุฌุนููู ุฃุชุนูู ุฏุงุฆููุง", "ุงูููู ุงุฌุนููู ุฃุณุชูุดู ุงูุนุงูู"],
    guidance: "ุงุณุชูุดู ุงูุนุงูู ูุงุจุญุซ ุนู ุงูุญููุฉ",
    associatedHouse: 9
  },
  {
    id: 10,
    name: "ุงูุชุฎุช ุงูุนุงุดุฑ",
    abbreviation: "ุช10",
    description: "ููุฑูุฒ ุฅูู ุงูุณูุนุฉ ูุงูุนูู",
    signs: ["ุงูุณูุนุฉ", "ุงูุฌุฏุงุฑุฉ", "ุงูุงุญุชุฑุงู"],
    surahs: ["ุงูุจูุฑุฉ", "ุงููุญู"],
    adhkar: ["ุงูููู ุงุฌุนููู ููุญุชุฑููุง", "ุงูููู ุงุฌุนููู ุฃุจูู ุณูุนุฉ ุทูุจุฉ"],
    guidance: "ุฎุทุท ูุณูุนุชู ุงูููููุฉ ููู ููุญุชุฑููุง",
    associatedHouse: 10
  },
  {
    id: 11,
    name: "ุงูุชุฎุช ุงูุญุงุฏู ุนุดุฑ",
    abbreviation: "ุช11",
    description: "ููุฑูุฒ ุฅูู ุงูุฃุตุฏูุงุก ูุงูุฃูุฏุงู",
    signs: ["ุงูุฃุตุฏูุงุก", "ุงููุฏู", "ุงูุงุณุชุฑุงุชูุฌูุฉ"],
    surahs: ["ุงูุฃูุจูุงุก", "ุงูุจูุฑุฉ"],
    adhkar: ["ุงูููู ุงุฌุนููู ุฃุฌุฏ ุฃุตุฏูุงุก ุตุงูุญูู", "ุงูููู ุงุฌุนููู ุฃุญูู ุฃูุฏุงูู"],
    guidance: "ุงุจูู ุตุฏุงูุงุช ูููุฉ ูุญุฏุฏ ุฃูุฏุงููุง ูุงุถุญุฉ",
    associatedHouse: 11
  },
  {
    id: 12,
    name: "ุงูุชุฎุช ุงูุซุงูู ุนุดุฑ",
    abbreviation: "ุช12",
    description: "ููุฑูุฒ ุฅูู ุงูุฎูุงุก ูุงูุฑูุญุงููุฉ",
    signs: ["ุงูุฑูุญู", "ุงูุณุฑ", "ุงูุชููุฑ"],
    surahs: ["ุงูุฃูุจูุงุก", "ุงูุฑูู"],
    adhkar: ["ุงูููู ุงุฌุนููู ุฃุชููุฑ ูู ุฎููู", "ุงูููู ุงุฌุนููู ุฃุจุญุซ ุนู ุงูุฑูุญุงููุฉ"],
    guidance: "ุงุณุชูุดู ุนุงููู ุงูุฑูุญู ูุงุจุญุซ ุนู ุงูุฃุณุฑุงุฑ",
    associatedHouse: 12
  }
];

let DATA = {
  figs: JSON.parse(JSON.stringify(DEFAULT_FIGS)),
  interpZ: '',
  interpI: '',
  parityMode: 'odd1',
  pawnTheme: 'grain',
  transcript: '',
  squareMessages: {}
};

let ttsEnabled = false; // ุญุงูุฉ ุชุดุบูู/ุฅููุงู ุงููุฑุงุกุฉ ุงูุตูุชูุฉ

/* ---------- ุฃุฏูุงุช ุตุบูุฑุฉ ---------- */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));

function saveLocal() {
  localStorage.setItem('raml_chess_v1', JSON.stringify(DATA));
}

function loadLocal() {
  const j = localStorage.getItem('raml_chess_v1');
  if (j) DATA = JSON.parse(j);
}

// ุญุณุงุจ ุงููููุฉ ุงูุนุฏุฏูุฉ (ุฃุจุฌุฏ)
function calculateAbjad(word) {
  const abjadMap = {
    'ุง': 1, 'ุฃ': 1, 'ุฅ': 1, 'ุข': 1, 'ุก': 1,
    'ุจ': 2, 'ุฌ': 3, 'ุฏ': 4, 'ู': 5, 'ู': 6, 'ุฒ': 7, 'ุญ': 8, 'ุท': 9,
    'ู': 10, 'ู': 10, 'ู': 20, 'ู': 30, 'ู': 40, 'ู': 50,
    'ุณ': 60, 'ุน': 70, 'ู': 80, 'ุต': 90, 'ู': 100, 'ุฑ': 200,
    'ุด': 300, 'ุช': 400, 'ุซ': 500, 'ุฎ': 600, 'ุฐ': 700, 'ุถ': 800,
    'ุธ': 900, 'ุบ': 1000
  };
  
  let sum = 0;
  for (let i = 0; i < word.length; i++) {
    sum += abjadMap[word[i]] || 0;
  }
  return sum;
}

// ุชูููู ุงููููุฉ ุฅูู ุฑูู ูุงุญุฏ
function reduceToSingleDigit(num) {
  while (num > 9) {
    num = num.toString().split('').reduce((sum, digit) => sum + parseInt(digit), 0);
  }
  return num;
}

// ุชูููุฏ ูููุฉ ุณุฑูุฉ ุนุดูุงุฆูุฉ
function generateSecretWord(rank, file) {
  const names = ["ุงูุฑุญูู", "ุงูุฑุญูู", "ุงูููู", "ุงููุฏูุณ", "ุงูุณูุงู", "ุงููุคูู", "ุงูููููู", "ุงูุนุฒูุฒ"];
  const actions = ["ูุจุฏุฃ", "ูุญูู", "ูุญูุธ", "ูุฑุฒู", "ููุฏู", "ููุตุฑ", "ูููู", "ูุญูุธ"];
  const objects = ["ุงูุฎูุฑ", "ุงููุฌุงุญ", "ุงูุจุฑูุฉ", "ุงูุฑุฒู", "ุงููุฏุงูุฉ", "ุงููุตุฑ", "ุงูุชูููู", "ุงูุญูุธ"];
  
  const nameIndex = (rank + file) % names.length;
  const actionIndex = (rank * file) % actions.length;
  const objectIndex = (rank + file * 2) % objects.length;
  
  return `${names[nameIndex]} ${actions[actionIndex]} ${objects[objectIndex]}`;
}

// ุชุญููู ุงููููุฉ ุจุงุณุชุฎุฏุงู ุดุฌุฑุฉ ุงูุฑุญูู ุงูุฑุญูู
function analyzeWordWithRahmanTree(word) {
  const abjadValue = calculateAbjad(word);
  const reducedValue = reduceToSingleDigit(abjadValue);
  
  // ุชุญุฏูุฏ ุงูุดูู ุงูุฑููู ุงููุฑุชุจุท
  const associatedForm = RUMAL_FORMS.find(form => {
    const formValue = calculateAbjad(form.name);
    return formValue % 9 === reducedValue;
  });
  
  // ุชุญุฏูุฏ ุงูุงุณู ุงูุญุณู ุงููุฑุชุจุท
  const associatedName = DIVINE_NAMES.find(name => {
    return name.abjad % 9 === reducedValue;
  });
  
  // ุชุญุฏูุฏ ุงูุณูุฑุฉ ุงููุฑุชุจุทุฉ
  const associatedSurah = QURAN_SURAH.find(surah => {
    return surah.number % 9 === reducedValue;
  });
  
  // ุชูููุฏ ุงูุฑุณุงูุฉ ุงูุณุฑูุฉ
  const secretMessage = generateSecretMessage(word, associatedForm, associatedName, associatedSurah);
  
  return {
    abjad: abjadValue,
    reducedValue: reducedValue,
    associatedForm: associatedForm,
    associatedName: associatedName,
    associatedSurah: associatedSurah,
    secretMessage: secretMessage
  };
}

// ุชูููุฏ ุงูุฑุณุงูุฉ ุงูุณุฑูุฉ
function generateSecretMessage(word, form, name, surah) {
  if (!form || !name || !surah) return "ุงููููุฉ ุชุญูู ุณุฑุงู ูุญุชุงุฌ ุฅูู ุชุฃูู ุฃุนูู";
  
  const messages = [
    `ูุง ${word}ุ ุงุนูู ุฃู ${name.name} ูุฏ ุฌุนู ููู ุณุฑ ${form.name}ุ ูุงุณุชุนู ุจุณูุฑุฉ ${surah.name} ูุชุตู ุฅูู ุงูุญููุฉ ุงููุทููุจุฉ`,
    `ูู ูููุฉ "${word}" ูููู ุณุฑ ${form.meaning}ุ ู ${name.name} ูุฑุดุฏู ุฅูู ุฃู ${form.message}ุ ูุชููู ${surah.name} ูุชุชููู`,
    `ุฅุฐุง ูุฑุฃุช ุณูุฑุฉ ${surah.name} ูุน ุงูุชุฃูู ูู ูุนูู ${form.name}ุ ุณุชุฌุฏ ุฃู ${name.name} ูุฏ ุฌุนู ูู ููุจู ุณุฑ ${word} ุงูุฐู ูุญูู ูู ุฑุณุงูุฉ: ${form.message}`,
    `ุงูุณุฑ: ${word} ุชุดูุฑ ุฅูู ุฃู ${name.name} ูุฏ ุฌุนู ููู ุทุงูุฉ ${form.name}ุ ูุงุณุชุนู ุจุณูุฑุฉ ${surah.name} ูุชุญููู ${form.message}`,
    `ูู ููุจ ูููุฉ "${word}" ูููู ุณุฑ ${form.name}ุ ู ${name.name} ูุฑุดุฏู ุฅูู ุฃู ${form.message}ุ ูุชููู ุณูุฑุฉ ${surah.name} ูุชุชููู`
  ];
  
  return messages[Math.floor(Math.random() * messages.length)];
}

// ููุก ุงูุจูุงุทุงุช ุงููุงุฑุบุฉ ุจุดุฌุฑุฉ ุงูุฑุญูู
function fillEmptySquaresWithRahmanTree() {
  // ุงูุจุญุซ ุนู ุงูุจูุงุทุงุช ุงููุงุฑุบุฉ (ุงูุตููู 3-6)
  const emptySquares = [];
  for (let r = 3; r <= 6; r++) {
    for (let f = 0; f < 8; f++) {
      emptySquares.push({rank: r, file: f});
    }
  }
  
  // ููุก ูู ุจูุงุทุฉ ูุงุฑุบุฉ ุจุฑุณุงูุฉ ุณุฑูุฉ
  emptySquares.forEach(square => {
    const {rank, file} = square;
    const sqId = `${FILES[file]}${rank}`;
    const word = generateSecretWord(rank, file); // ุชูููุฏ ูููุฉ ุณุฑูุฉ
    const analysis = analyzeWordWithRahmanTree(word);
    
    // ุญูุธ ุงูุชุญููู ูู ุงูุจูุงูุงุช
    const squareData = {
      word: word,
      analysis: analysis,
      timestamp: new Date().toISOString()
    };
    
    // ุชุฎุฒูู ุงูุจูุงูุงุช
    if (!DATA.squareMessages) DATA.squareMessages = {};
    DATA.squareMessages[sqId] = squareData;
  });
  
  logInfo(`ุชู ููุก ${emptySquares.length} ุจูุงุทุฉ ูุงุฑุบุฉ ุจุงุณุชุฎุฏุงู ุดุฌุฑุฉ ุงูุฑุญูู`);
  saveLocal();
  renderBoard();
}

// ุชุญููู ุฌููุน ุงููููุงุช ูู ุงูุฑูุนุฉ
function analyzeAllWords() {
  let analysisResult = "";
  
  for (let r = 3; r <= 6; r++) {
    for (let f = 0; f < 8; f++) {
      const sqId = `${FILES[file]}${rank}`;
      if (DATA.squareMessages && DATA.squareMessages[sqId]) {
        const analysis = DATA.squareMessages[sqId].analysis;
        analysisResult += `<div style="margin-bottom:10px;padding:8px;background:#0a1c2a;border-radius:6px">
          <div><b>${sqId}: ${DATA.squareMessages[sqId].word}</b></div>
          <div class="small">ุงููููุฉ ุงูุนุฏุฏูุฉ: ${analysis.abjad}</div>
          <div class="small">ุงูุฑุณุงูุฉ ุงูุณุฑูุฉ: <i>${analysis.secretMessage}</i></div>
        </div>`;
      }
    }
  }
  
  if (!analysisResult) {
    analysisResult = "<div class='small'>ูู ูุชู ุชุญููู ุฃู ูููุงุช ุจุนุฏ. ุงุถุบุท ุนูู 'ููุก ุงููุฑุงุบุงุช ุจุดุฌุฑุฉ ุงูุฑุญูู' ุฃููุงู.</div>";
  }
  
  // ุนุฑุถ ุงููุชุงุฆุฌ ูู ูุงูุฐุฉ ููุจุซูุฉ
  const modal = $('#modal'); 
  const body = $('#modalBody'); 
  $('#modalTitle').textContent = "ุชุญููู ุฌููุน ุงููููุงุช";
  body.innerHTML = analysisResult;
  $('#modalBack').style.display = 'flex';
}

/* ---------- ุชุจููุจุงุช ---------- */
$$('.tab').forEach(t => {
  t.addEventListener('click', () => {
    $$('.tab').forEach(x => x.classList.remove('active'));
    t.classList.add('active');
    const pane = t.dataset.tab;
    $$('.tabpane').forEach(p => p.style.display = (p.dataset.pane === pane ? 'block' : 'none'));
  });
});

/* ---------- parity (0=ูุฑุฏ,1=ุฒูุฌ) ---------- */
$('#parityMode').value = DATA.parityMode;
$('#parityMode').addEventListener('change', () => {
  DATA.parityMode = $('#parityMode').value;
  saveLocal();
  renderPad();
});

function parityDisplay(bit) {
  // mode odd0: 0 -> ูุฑุฏ (โข) ; 1 -> ุฒูุฌ (โขโข)
  const mode = $('#parityMode').value;
  if (mode === 'odd0') return bit === '0' ? 'โข' : 'โขโข';
  return bit === '1' ? 'โข' : 'โขโข';
}

function toCanonical(bits) {
  // canon: 1 = ูุฑุฏ, 0 = ุฒูุฌ
  const mode = $('#parityMode').value;
  if (mode === 'odd0') return bits.split('').map(b => b === '0' ? '1' : '0').join('');
  return bits;
}

function badgeFromCanonical(bits) {
  return bits.split('').map(b => b === '1' ? 'โข' : 'โขโข').join(' ');
}

function renderRumalPattern(bits) {
  // ุชุญููู ุงูุจุชุงุช ุฅูู ููุท ุงูุฑูู (ููุท)
  const pattern = bits.split('').map(b => b === '1' ? 1 : 2);
  return pattern.map(dots => {
    return `<div class="rumal-pattern">${Array(dots).fill(0).map(() => 
      `<span class="rumal-dot ${dots === 2 ? 'double' : ''}"></span>`).join('')}</div>`;
  }).join('');
}

/* ---------- ุฅุฏุฎุงู ุงูุฃููุงุช ---------- */
let moms = []; // stored canonical (1=ูุฑุฏ)
function renderMoms() {
  const wrap = $('#momsRow');
  wrap.innerHTML = '';
  moms.forEach((m, i) => {
    const el = document.createElement('div');
    el.className = 'piece';
    el.style.margin = '4px';
    el.style.padding = '6px';
    el.innerHTML = `<div style="font-weight:800">${badgeFromCanonical(m)}</div><div class="small">ุฃู ${i + 1} โ <code>${m}</code></div>`;
    el.onclick = () => {
      if (confirm('ุญุฐู ุฃูุ')) {
        moms.splice(i, 1);
        renderMoms();
      }
    };
    wrap.appendChild(el);
  });
}

$('#addFromInput').addEventListener('click', () => {
  const v = ($('#quickBits').value || '').trim();
  if (!/^[01]{4}$/.test(v)) {
    alert('ุฃุฏุฎู 4 ุฎุงูุงุช 0/1');
    return;
  }
  moms.push(toCanonical(v));
  renderMoms();
});

$('#randomMoms').addEventListener('click', () => {
  while (moms.length < 4) moms.push(toCanonical(Array.from({ length: 4 }, () => Math.random() > 0.5 ? '1' : '0').join('')));
  renderMoms();
});

$('#resetMoms').addEventListener('click', () => {
  if (confirm('ุชูุฑูุบ ุงูุฃููุงุชุ')) {
    moms = [];
    renderMoms();
    $('#resRow').innerHTML = '';
    SIXTEEN = [];
    renderBoard();
  }
});

/* ---------- ุจูุงุก ุงูู16 ---------- */
function xor(a, b) {
  return (Number(a) ^ Number(b)).toString();
}

function col(arr, i) {
  return arr.map(x => x[i]).join('');
}

function build16(momsArr) {
  if (momsArr.length !== 4) throw new Error('ููุฒู ุฃุฑุจุนุฉ ุฃููุงุช.');
  const M = momsArr; // strings canonical (1=ูุฑุฏ)
  const D = [0, 1, 2, 3].map(i => col(M, i)); // ุงูุจูุงุช
  const N1 = M[0].split('').map((_, r) => xor(M[0][r], M[1][r])).join('');
  const N2 = M[2].split('').map((_, r) => xor(M[2][r], M[3][r])).join('');
  const N3 = D[0].split('').map((_, r) => xor(D[0][r], D[1][r])).join('');
  const N4 = D[2].split('').map((_, r) => xor(D[2][r], D[3][r])).join('');
  const W1 = N1, W2 = N2;
  const J = W1.split('').map((_, r) => xor(W1[r], W2[r])).join('');
  const all = [...M, ...D, N1, N2, N3, N4, W1, W2, J].slice(0, 16);
  return all;
}

let SIXTEEN = [];

$('#build16').addEventListener('click', () => {
  try {
    SIXTEEN = build16(moms);
    renderSixteen();
    renderBoard();
    logInfo('ุชู ุชูููุฏ ุงูู16 ุดูู.');
  } catch (e) {
    alert(e.message);
  }
});

function renderSixteen() {
  const wrap = $('#resRow');
  wrap.innerHTML = '';
  SIXTEEN.forEach((b, i) => {
    const f = figByBits(b) || ['????', 'ุบูุฑ ูุนุฑูู', '?', '?', '?', '?', '?', '?'];
    const el = document.createElement('div');
    el.className = 'piece';
    el.style.margin = '4px';
    el.innerHTML = `<div style="font-weight:800">${badgeFromCanonical(b)}</div><div class="small">#${i + 1} โ <b>${f[1]}</b> <code>${b}</code></div>`;
    wrap.appendChild(el);
  });
}

/* ---------- ุงููุงููุณ ูุงูุจููุช ---------- */
function figByBits(bits) {
  return DATA.figs.find(f => f[0] === bits);
}

function findRumalFormByBits(bits) {
  // ูุญุงููุฉ ุงูุนุซูุฑ ุนูู ุดูู ุงูุฑูู ุงููุทุงุจู
  const pattern = bits.split('').map(b => b === '1' ? 1 : 2);
  return RUMAL_FORMS.find(form => {
    for (let i = 0; i < 4; i++) {
      if (form.pattern[i] !== pattern[i]) return false;
    }
    return true;
  });
}

function renderFigTable() {
  const wrap = $('#figTableWrap');
  wrap.innerHTML = '';
  const tbl = document.createElement('table');
  tbl.className = 'table';
  const hdr = document.createElement('tr');
  hdr.innerHTML = '<th>#</th><th>bits</th><th>ุงูุงุณู ุงูุนุฑุจู</th><th>ูุงุชููู</th><th>ุงูุนูุตุฑ</th><th>ุงููููุจ</th><th>ุงูุจุฑุฌ</th><th>ุทุจูุนุฉ</th><th>ููุงุญุธุฉ</th>';
  tbl.appendChild(hdr);
  DATA.figs.forEach((f, i) => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${i + 1}</td>` + f.map((c, j) => `<td contenteditable data-i="${i}" data-j="${j}">${c}</td>`).join('');
    tbl.appendChild(tr);
  });
  wrap.appendChild(tbl);
  tbl.querySelectorAll('[contenteditable]').forEach(td => {
    td.addEventListener('blur', () => {
      const i = +td.dataset.i, j = +td.dataset.j;
      DATA.figs[i][j] = td.textContent.trim();
      saveLocal();
      renderSixteen();
      renderBoard();
    });
  });
  saveLocal();
}

function renderHouses() {
  // ุจุณูุท: ุงูููุฒู 1..12 = ุฃูู 12 ูู SIXTEEN ุฅู ูุฌุฏุช
  const wrap = $('#houseTableWrap');
  wrap.innerHTML = '';
  const tbl = document.createElement('table');
  tbl.className = 'table';
  const hdr = document.createElement('tr');
  hdr.innerHTML = '<th>ุจูุช</th><th>ุดูู</th><th>ุงูุงุณู</th><th>ุงูุนูุตุฑ</th><th>ุงูุฑุณุงูุฉ</th>';
  tbl.appendChild(hdr);
  for (let i = 0; i < 12; i++) {
    const bits = SIXTEEN[i] || '';
    const f = bits ? (figByBits(bits) || ['', '', '', '', '', '', '', '']) : ['', 'ูุงุฑุบ', '---', '', '', '', '', ''];
    const rumalForm = bits ? findRumalFormByBits(bits) : null;
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${i + 1}</td><td>${bits ? badgeFromCanonical(bits) : 'โ'}</td><td>${f[1] || 'โ'}</td><td>${f[3] || 'โ'}</td><td contenteditable data-house="${i}">${rumalForm ? rumalForm.message : 'โ'}</td>`;
    tbl.appendChild(tr);
  }
  wrap.appendChild(tbl);
  tbl.querySelectorAll('[contenteditable]').forEach(td => {
    td.addEventListener('blur', () => saveLocal());
  });
}

// ุนุฑุถ ุฌุฏูู ุงูุฃุณูุงุก ุงูุญุณูู
function renderDivineNamesTable() {
  const wrap = $('#divineNamesTable');
  wrap.innerHTML = `
    <table class="table">
      <tr>
        <th>ุงูุฑูู</th>
        <th>ุงูุงุณู</th>
        <th>ุงููููุฉ ุงูุนุฏุฏูุฉ</th>
        <th>ุงูุฏูุงูุฉ</th>
        <th>ุงูุดูู ุงููุฑุชุจุท</th>
        <th>ุงูุจูุช</th>
      </tr>
      ${DIVINE_NAMES.map((name, i) => `
        <tr>
          <td>${i + 1}</td>
          <td>${name.name}</td>
          <td>${name.abjad}</td>
          <td>${name.meaning}</td>
          <td>${name.associatedForms.join(", ")}</td>
          <td>ุงูุจูุช ${name.associatedHouse}</td>
        </tr>
      `).join('')}
    </table>
  `;
}

// ุนุฑุถ ุฌุฏูู ุงูุชุฎุช
function renderTakhtTable() {
  const wrap = $('#takhtTableWrap');
  wrap.innerHTML = `
    <table class="table">
      <tr>
        <th>ุงูุงุฎุชุตุงุฑ</th>
        <th>ุงูุงุณู</th>
        <th>ุงููุตู</th>
        <th>ุงูุฅุดุงุฑุงุช</th>
        <th>ุงูุณูุฑ</th>
        <th>ุงูุฃุฐูุงุฑ</th>
        <th>ุงูุชูุฌูู</th>
      </tr>
      ${TAKHTS.map(takht => `
        <tr>
          <td>${takht.abbreviation}</td>
          <td>${takht.name}</td>
          <td>${takht.description}</td>
          <td>${takht.signs.join(", ")}</td>
          <td>${takht.surahs.join(", ")}</td>
          <td>${takht.adhkar.join(", ")}</td>
          <td>${takht.guidance}</td>
        </tr>
      `).join('')}
    </table>
  `;
}

/* ---------- ุงูุฑูุนุฉ ---------- */
const FILES = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];
const whiteBack = ['ุฑุฎ', 'ุญุตุงู', 'ููู', 'ูุฒูุฑ', 'ููู', 'ููู', 'ุญุตุงู', 'ุฑุฎ'];
const blackBack = [...whiteBack];

function pawnLabel(fileIndex, isWhite) {
  if ($('#pawnTheme').value === 'grain') {
    const val = 1 << fileIndex;
    return `๐พ ${val}`;
  }
  const bits = ('00000000' + (1 << fileIndex).toString(2)).slice(-8);
  return `โ๏ธ ${bits}`;
}

function initialPieceAt(rank, file) {
  if (rank === 2) return { side: 'ุฃุจูุถ', piece: 'ุฌูุฏู', label: pawnLabel(file, true) };
  if (rank === 7) return { side: 'ุฃุณูุฏ', piece: 'ุฌูุฏู', label: pawnLabel(file, false) };
  if (rank === 1) return { side: 'ุฃุจูุถ', piece: whiteBack[file] };
  if (rank === 8) return { side: 'ุฃุณูุฏ', piece: blackBack[file] };
  return null;
}

function logInfo(txt) {
  const log = $('#infoLog');
  const d = document.createElement('div');
  d.textContent = `${(new Date()).toLocaleTimeString()} โ ${txt}`;
  log.prepend(d);
}

function speak(txt) {
  if (!ttsEnabled) return;
  try {
    const u = new SpeechSynthesisUtterance(txt);
    u.lang = 'ar-SA';
    speechSynthesis.speak(u);
  } catch (e) {}
}

/* ููุญุฉ ุงูุฑูุฒ */
function renderBoard() {
  const board = $('#board');
  board.innerHTML = '';
  for (let r = 8; r >= 1; r--) {
    for (let f = 0; f < 8; f++) {
      const sq = document.createElement('div');
      sq.className = 'sq ' + (((r + f) % 2 === 0) ? 'light' : 'dark');
      sq.dataset.rank = r;
      sq.dataset.file = f;
      const piece = initialPieceAt(r, f);
      const sqId = `${FILES[f]}${r}`;
      
      // ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ูุฐู ุงูุจูุงุทุฉ ุชุญุชูู ุนูู ุฑุณุงูุฉ ูู ุดุฌุฑุฉ ุงูุฑุญูู
      const hasRumalMessage = DATA.squareMessages && DATA.squareMessages[sqId];
      
      // ุฅุถุงูุฉ ูุฆุฉ ุฎุงุตุฉ ุฅุฐุง ูุงูุช ุชุญุชูู ุนูู ุฑุณุงูุฉ
      if (hasRumalMessage) {
        sq.classList.add('rumal-message');
      }
      
      if ((r === 1 || r === 8) && piece) { // ุญุงุดูุฉ โ ูุนุฑุถ ุดูู ุฅุฐุง ููุฌุฏ ูู SIXTEEN
        const idx = (r === 1 ? 0 : 8) + f;
        const bits = SIXTEEN[idx];
        if (bits) {
          const meta = figByBits(bits) || ['','','','','','','',''];
          const rumalForm = findRumalFormByBits(bits);
          sq.innerHTML = `<div class="piece" data-bits="${bits}" data-rank="${r}" data-file="${f}">
            <div style="font-weight:800">${badgeFromCanonical(bits)}</div>
            <div class="small">${meta[1] || 'โ'}</div>
            ${rumalForm ? `<div class="small" style="color:#a78bfa">${rumalForm.name}</div>` : ''}
          </div>`;
        } else {
          sq.innerHTML = `<div class="piece" data-rank="${r}" data-file="${f}"><div class="small">ูุงุฑุบ</div></div>`;
        }
      } else if (piece && piece.piece === 'ุฌูุฏู') {
        sq.innerHTML = `<div class="piece" data-pawn="1" data-side="${piece.side}" data-rank="${r}" data-file="${f}">
          <div>${piece.label}</div>
          <div class="small">${piece.side} โ ุฌูุฏู</div>
        </div>`;
      } else {
        // ุฅุฐุง ูุงูุช ุงูุจูุงุทุฉ ุชุญุชูู ุนูู ุฑุณุงูุฉุ ุนุฑุถูุง
        if (hasRumalMessage) {
          const msg = DATA.squareMessages[sqId];
          sq.innerHTML = `
            <div class="piece" data-rumal-message="${sqId}" style="background:linear-gradient(135deg,#0d2538,#0a1c2a);">
              <div style="font-weight:800;font-size:14px;color:#a78bfa">ุดุฌุฑุฉ ุงูุฑุญูู</div>
              <div class="small" style="color:#e6eef6;white-space:normal;text-align:center">${msg.word}</div>
            </div>
          `;
        } else {
          sq.innerHTML = '';
        }
      }
      
      // ุชูุงุนู: ููุฑุฉ ูุงุญุฏุฉ + ููุฑุฉ ูุฒุฏูุฌุฉ
      let clickTimer = null;
      sq.addEventListener('click', (ev) => {
        if (clickTimer == null) {
          clickTimer = setTimeout(() => {
            clickTimer = null;
            onSquareClick(r, f);
          }, 250);
        }
      });
      sq.addEventListener('dblclick', (ev) => {
        if (clickTimer) {
          clearTimeout(clickTimer);
          clickTimer = null;
        }
        onSquareDoubleClick(r, f);
      });
      board.appendChild(sq);
    }
  }
}

/* ุงูููุฑ: ุนุฑุถ ููุฌุฒ */
function onSquareClick(rank, file) {
  const sqId = `${FILES[file]}${rank}`;
  const piece = initialPieceAt(rank, file);
  if (rank === 1 || rank === 8) {
    const idx = (rank === 1 ? 0 : 8) + file;
    const bits = SIXTEEN[idx];
    if (!bits) {
      $('#squareInfo').innerHTML = `ุงูุฎุงูุฉ ${sqId} โ ูุง ููุฌุฏ ุดูู ูุซุจุช ููุง.`;
      return;
    }
    const meta = figByBits(bits) || ['','','','','','','',''];
    const rumalForm = findRumalFormByBits(bits);
    $('#squareInfo').innerHTML = `<div><b>ุงูุฎุงูุฉ:</b> ${sqId} โ ุญุงุดูุฉ</div><div><b>ุงูุดูู:</b> ${badgeFromCanonical(bits)} <code>${bits}</code></div><div><b>ุงูุงุณู:</b> ${meta[1] || 'โ'}</div><div class="small"><b>ุนูุตุฑ/ูููุจ:</b> ${meta[3] || 'โ'} / ${meta[4] || 'โ'}</div>`;
    if (rumalForm) {
      $('#squareInfo').innerHTML += `<div class="small"><b>ุดูู ุงูุฑูู:</b> ${rumalForm.name} (${rumalForm.element})</div>`;
    }
    
    // ุฅุถุงูุฉ ูุนูููุงุช ุงูุชุฎุช
    const takht = TAKHTS.find(t => t.associatedHouse === (idx % 12) + 1);
    if (takht) {
      $('#squareInfo').innerHTML += `<div class="small"><b>ุงูุชุฎุช:</b> ${takht.abbreviation} - ${takht.name}</div>`;
      $('#squareInfo').innerHTML += `<div class="small"><b>ุงูุฅุดุงุฑุงุช:</b> ${takht.signs.join(', ')}</div>`;
      $('#squareInfo').innerHTML += `<div class="small"><b>ุงูุณูุฑ:</b> ${takht.surahs.join(', ')}</div>`;
      $('#squareInfo').innerHTML += `<div class="small"><b>ุงูุฃุฐูุงุฑ:</b> ${takht.adhkar.join(', ')}</div>`;
      $('#squareInfo').innerHTML += `<div class="small"><b>ุงูุชูุฌูู:</b> ${takht.guidance}</div>`;
    }
    
    logInfo(`ุญุงุดูุฉ ${sqId}: ${meta[1] || 'ุดูู ุบูุฑ ูุนุฑูู'}`);
    speak(`ูู ุงูุฎุงูุฉ ${sqId} ุดูู ${meta[1] || 'ูุฌููู'}.`);
  } else if (piece && piece.piece === 'ุฌูุฏู') {
    $('#squareInfo').innerHTML = `<div><b>ุงูุฎุงูุฉ:</b> ${sqId} โ ุฌูุฏู (${piece.side})</div><div>${piece.label}</div>`;
    logInfo(`ุฌูุฏู ${sqId}: ${piece.label}`);
    speak(`ุงูุฌูุฏู ูู ${sqId}: ${piece.label}`);
  } else {
    // ุฅุฐุง ูุงูุช ุงูุจูุงุทุฉ ุชุญุชูู ุนูู ุฑุณุงูุฉ ูู ุดุฌุฑุฉ ุงูุฑุญูู
    if (DATA.squareMessages && DATA.squareMessages[sqId]) {
      const msg = DATA.squareMessages[sqId];
      $('#squareInfo').innerHTML = `
        <div><b>ุงูุฎุงูุฉ:</b> ${sqId} โ ุฑุณุงูุฉ ุดุฌุฑุฉ ุงูุฑุญูู</div>
        <div><b>ุงููููุฉ:</b> ${msg.word}</div>
        <div class="small"><b>ุงููููุฉ ุงูุนุฏุฏูุฉ:</b> ${msg.analysis.abjad}</div>
        <div class="small"><b>ุงูุฑุณุงูุฉ ุงูุณุฑูุฉ:</b></div>
        <div class="small" style="color:#a78bfa;white-space:normal">${msg.analysis.secretMessage}</div>
      `;
      
      // ุฅุถุงูุฉ ูุนูููุงุช ุงูุชุฎุช
      const takht = TAKHTS.find(t => t.associatedHouse === (rank % 12) + 1);
      if (takht) {
        $('#squareInfo').innerHTML += `<div class="small"><b>ุงูุชุฎุช:</b> ${takht.abbreviation} - ${takht.name}</div>`;
        $('#squareInfo').innerHTML += `<div class="small"><b>ุงูุฅุดุงุฑุงุช:</b> ${takht.signs.join(', ')}</div>`;
        $('#squareInfo').innerHTML += `<div class="small"><b>ุงูุณูุฑ:</b> ${takht.surahs.join(', ')}</div>`;
        $('#squareInfo').innerHTML += `<div class="small"><b>ุงูุฃุฐูุงุฑ:</b> ${takht.adhkar.join(', ')}</div>`;
        $('#squareInfo').innerHTML += `<div class="small"><b>ุงูุชูุฌูู:</b> ${takht.guidance}</div>`;
      }
    } else {
      $('#squareInfo').innerHTML = `<div><b>ุงูุฎุงูุฉ:</b> ${sqId} โ ุณุงุญุฉ ุงูุชุดุฌูุฑ (ูุงุฑุบุฉ)</div><div class="small">ุงุณุชุฎุฏู ุฒุฑ "ููุก ุงููุฑุงุบุงุช ุจุดุฌุฑุฉ ุงูุฑุญูู" ูููุก ูุฐู ุงููุฑุงุบุงุช ุจุฑุณุงุฆู ุณุฑูุฉ.</div>`;
      logInfo(`ุงูุณุงุญุฉ ${sqId} โ ูุงุฑุบุฉ.`);
    }
  }
}

/* ุงูููุฑ ุงููุฒุฏูุฌ: ูุชุญ modal ูููุตู */
function onSquareDoubleClick(rank, file) {
  const sqId = `${FILES[file]}${rank}`;
  const piece = initialPieceAt(rank, file);
  const modal = $('#modal');
  const body = $('#modalBody');
  $('#modalTitle').textContent = `ุดุฑุญ ููุตูู โ ${sqId}`;
  body.innerHTML = '';

  if (rank === 1 || rank === 8) {
    const idx = (rank === 1 ? 0 : 8) + file;
    const bits = SIXTEEN[idx];
    if (!bits) {
      body.innerHTML = `<div class="small">ูุง ููุฌุฏ ุดูู ูุซุจุช ููุง. ุฃุฏุฎู 4 ุฎุงูุงุช ูู ุงูุญูู ุฃุนูุงู ุซู ุงุถุบุท ููุง ูุชุซุจูุช.</div>`;
      $('#modalBack').style.display = 'flex';
      return;
    }
    const meta = figByBits(bits) || ['','','','','','','',''];
    const rumalForm = findRumalFormByBits(bits);
    const mansionIndex = idx % 28;
    const mansion = MOON_MANSIONS[mansionIndex];
    // ุนุฑุถ ูููุตูู:
    body.innerHTML = `
      <div style="display:flex;gap:8px;align-items:center">
        <div style="font-weight:900;font-size:20px">${badgeFromCanonical(bits)}</div>
        <div>
          <div><b>ุงูุงุณู:</b> ${meta[1] || 'โ'} (${meta[2] || 'โ'})</div>
          <div><b>bits:</b> <code>${bits}</code></div>
          <div><b>ุงูุนูุตุฑ / ุงููููุจ:</b> ${meta[3] || 'โ'} / ${meta[4] || 'โ'}</div>
          <div><b>ุงูุทุจูุนุฉ:</b> ${meta[6] || 'โ'}</div>
        </div>
      </div>
      <div style="margin-top:10px">
        ${renderRumalPattern(bits)}
      </div>
      ${rumalForm ? `
      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:8px 0">
      <div style="font-weight:700;color:#a78bfa">${rumalForm.name} โ ุดูู ุงูุฑูู</div>
      <div class="small"><b>ุงูุฏูุงูุฉ:</b> ${rumalForm.meaning}</div>
      <div class="small"><b>ุงูุนูุตุฑ:</b> ${rumalForm.element}</div>
      <div class="small"><b>ุงูุจูุช:</b> ${rumalForm.house}</div>
      <div class="small"><b>ุงูุฑุณุงูุฉ:</b> ${rumalForm.message}</div>
      ` : ''}
      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:8px 0">
      <div class="small"><b>ุงูููุฒูุฉ ุงูููุฑูุฉ:</b> ${mansion.name} (${mansion.letter})</div>
      <div class="small"><b>ุงูุฏูุงูุฉ:</b> ${mansion.meaning}</div>
      <div style="margin-top:10px" class="small"><b>ุชูุณูุฑ ุนุงู (ูุฌููุน ูู ูุตุงุฏุฑ ุงูุฑูู):</b><br>${meta[7] || 'ูุง ุชูุณูุฑ ูุจุฏุฆู.'}</div>
      <div style="margin-top:10px" class="small"><b>ุฑุคู (ุฒูุงุชู / ุฅุฏุฑูุณ) โ ููุนุฏููุฉ:</b><br>ููููู ุชุญุฑูุฑ ูุตูุต ุงูุฑุคู ุงูุฎุงุตุฉ ุจู ูู ูุงูุฐุฉ ุงูุฌุฏุงูู ูุงุฑุชุจุงุท ุฃููุงุฑู ุจุงูุจูุช ูุงูุดูู.</div>
      <div style="margin-top:10px" class="small"><b>ููุงุญุธุงุช ูู ุณูุณูุฉ 'ุทุงููุณ' (ููุฎูุต):</b><br>ุงูุฃุฏุงุฉ ุชุถุน ููุง ููุฎุตูุง ุนุงููุง ุนู ุฑุจุท ุงูุดูู ุจุงูุจูุช ูุงูุนูุงุตุฑ โ ูููููู ูุตู ุงูุชุจุงุณุงุชู ุงูุญุฑููุฉ ูู ุญูู 'Transcript' ูู ุชุจููุจ 'ุญูู'.</div>
      <div style="margin-top:10px">
        <button id="ttsModal" class="btn">ูุฑุงุกุฉ ุงูุดุฑุญ</button>
        <button id="linkMove" class="btn">ุฑุจุท ุจูููุฉ ูู ุขุฎุฑ ุชุญููู PGN</button>
      </div>
      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:8px 0">
      <div class="small"><b>ูุตูุต ููุฑุงุฌุน:</b><div id="modalRefs">${(DATA.transcript || '') ? DATA.transcript : '<i>ูู ุชูุถููู ุงูุชุจุงุณุงุช ุญุฑููุฉ ุจุนุฏ.</i>'}</div></div>
    `;
    $('#modalBack').style.display = 'flex';
    $('#ttsModal').addEventListener('click', () => speak(`ุดุฑุญ ุงูุดูู ${meta[1] || 'ุบูุฑ ูุนุฑูู'}. ${rumalForm ? rumalForm.message : ''}`));
    $('#linkMove').addEventListener('click', () => {
      if (window._lastPGNMatch) {
        alert('ูุฑุจูุท ุจูููุฉ: ' + window._lastPGNMatch.san + ' โ ' + window._lastPGNMatch.bits);
      } else {
        alert('ูุง ุชูุฌุฏ ูููุฉ ูุญููุฉ ุญุฏูุซูุง ูุฑุจุทูุง.');
      }
    });
  } else if (piece && piece.piece === 'ุฌูุฏู') {
    body.innerHTML = `<div class="small"><b>ุฌูุฏู ${piece.side} ูู ${sqId}</b><br>ูููุฉ/ุฑูุฒ: ${piece.label}<br>ูููู ุฑุจุท ูุฐุง ุงูุฌูุฏู ุจูุฎุฑุฌุงุช ุชุดุฌูุฑ ููุนุทู ุฑุณุงูุฉ ุนูุฏ ุงูุชุญููู.</div>`;
    $('#modalBack').style.display = 'flex';
  } else {
    // ุฅุฐุง ูุงูุช ุงูุจูุงุทุฉ ุชุญุชูู ุนูู ุฑุณุงูุฉ ูู ุดุฌุฑุฉ ุงูุฑุญูู
    if (DATA.squareMessages && DATA.squareMessages[sqId]) {
      const msg = DATA.squareMessages[sqId];
      body.innerHTML = `
        <div style="display:flex;flex-direction:column;gap:10px">
          <div style="background:#0a1c2a;padding:10px;border-radius:8px">
            <div style="font-weight:700;color:#a78bfa;margin-bottom:5px">ุงููููุฉ ุงูุณุฑูุฉ</div>
            <div style="font-size:18px;font-weight:800;text-align:center">${msg.word}</div>
            <div class="small" style="text-align:center;margin-top:5px">ุงููููุฉ ุงูุนุฏุฏูุฉ: ${msg.analysis.abjad}</div>
          </div>
          
          ${msg.analysis.associatedName ? `
          <div style="background:#0a1c2a;padding:10px;border-radius:8px">
            <div style="font-weight:700;color:#a78bfa;margin-bottom:5px">ุงูุงุณู ุงูุญุณู ุงููุฑุชุจุท</div>
            <div style="font-size:16px;font-weight:700;text-align:center">${msg.analysis.associatedName.name}</div>
            <div class="small" style="text-align:center">${msg.analysis.associatedName.meaning}</div>
            <div class="small" style="text-align:center;margin-top:5px">ุงููููุฉ ุงูุนุฏุฏูุฉ: ${msg.analysis.associatedName.abjad}</div>
          </div>
          ` : ''}
          
          ${msg.analysis.associatedForm ? `
          <div style="background:#0a1c2a;padding:10px;border-radius:8px">
            <div style="font-weight:700;color:#a78bfa;margin-bottom:5px">ุดูู ุงูุฑูู ุงููุฑุชุจุท</div>
            <div style="font-size:16px;font-weight:700;text-align:center">${msg.analysis.associatedForm.name}</div>
            <div class="small" style="text-align:center">${msg.analysis.associatedForm.meaning}</div>
            <div class="small" style="text-align:center;margin-top:5px">ุงูุจูุช: ${msg.analysis.associatedForm.house}</div>
          </div>
          ` : ''}
          
          ${msg.analysis.associatedSurah ? `
          <div style="background:#0a1c2a;padding:10px;border-radius:8px">
            <div style="font-weight:700;color:#a78bfa;margin-bottom:5px">ุงูุณูุฑุฉ ุงููุฑุชุจุทุฉ</div>
            <div style="font-size:16px;font-weight:700;text-align:center">ุณูุฑุฉ ${msg.analysis.associatedSurah.name}</div>
            <div class="small" style="text-align:center">ุงูุฑูู: ${msg.analysis.associatedSurah.number} - ุงูุขูุงุช: ${msg.analysis.associatedSurah.verses}</div>
            <div class="small" style="text-align:center;margin-top:5px">ุงูุฏูุงูุฉ ุงูุฑูููุฉ: ${msg.analysis.associatedSurah.geomanticSignificance}</div>
          </div>
          ` : ''}
          
          <div style="background:#0d2538;padding:15px;border-radius:10px;margin-top:10px">
            <div style="font-weight:700;color:#a78bfa;margin-bottom:8px">ุงูุฑุณุงูุฉ ุงูุณุฑูุฉ</div>
            <div style="font-style:italic;line-height:1.6;color:#e6eef6">${msg.analysis.secretMessage}</div>
          </div>
          
          <div style="margin-top:15px">
            <button id="ttsMessage" class="btn" style="width:100%">ูุฑุงุกุฉ ุงูุฑุณุงูุฉ ุงูุณุฑูุฉ</button>
          </div>
        </div>
      `;
    } else {
      body.innerHTML = `<div class="small"><b>ุณุงุญุฉ ุงูุชุดุฌูุฑ โ ${sqId}</b><br>ููุงู ูุฅุฌุฑุงุก ุนูููุงุช ุชุฑููุจูุฉ ุจูู ุงูุฌููุฏ ูุงูุญุงุดูุฉ. ูููู ููุง ูุชุงุจุฉ ูุตูุต ุชูุณูุฑูุฉ ุฃู ูุตู ูุชุงุฆุฌ ุงูุชุญููู.</div>`;
    }
    $('#modalBack').style.display = 'flex';
    
    // ุฅุถุงูุฉ ุชูุงุนู ููุฑุงุกุฉ ุงูุฑุณุงูุฉ ุงูุณุฑูุฉ
    const ttsBtn = $('#ttsMessage');
    if (ttsBtn) {
      ttsBtn.addEventListener('click', () => {
        if (DATA.squareMessages && DATA.squareMessages[sqId]) {
          speak(DATA.squareMessages[sqId].analysis.secretMessage);
        }
      });
    }
  }
}

/* ุงุบูุงู modal */
$('#modalClose').addEventListener('click', () => $('#modalBack').style.display = 'none');
$('#modalBack').addEventListener('click', (e) => {
  if (e.target.id === 'modalBack') $('#modalBack').style.display = 'none';
});

/* ---------- PGN parsing & mapping ---------- */
function parsePGN(txt) {
  let s = txt.replace(/\{[^}]*\}/g, '').replace(/\[[^\]]*\]/g, '').replace(/;.*$/gm, '').trim();
  s = s.replace(/\d+\.\.\./g, '').trim();
  const tokens = s.split(/\s+/).filter(Boolean);
  return tokens;
}

function fileIndex(ch) {
  return 'abcdefgh'.indexOf(ch.toLowerCase());
}

function rankToBit(r) {
  return (r % 2) ? '1' : '0'; // odd rank => 1 (ูุฑุฏ) in our canonical mapping
}

function fileToBit(f) {
  return ((f + 1) % 2) ? '1' : '0';
}

function sanToBits(san, idx) {
  // ุฎูุงุฑุฒููุฉ ูุจุณุทุฉ ุชุญููู SAN -> 4 ุจุช canon
  const sq = san.match(/([a-h][1-8])/);
  let destFile = null, destRank = null;
  if (sq) {
    destFile = fileIndex(sq[1][0]);
    destRank = parseInt(sq[1][1], 10);
  }
  const capture = san.includes('x');
  const pieceChar = san.match(/^[KQRBN]/) ? san[0] : 'P';
  const bit1 = destRank ? rankToBit(destRank) : (idx % 2 ? '1' : '0');
  const bit2 = destFile != null ? fileToBit(destFile) : ((idx + 1) % 2 ? '1' : '0');
  const bit3 = capture ? '1' : '0';
  const bit4 = (pieceChar === 'P') ? '1' : '0';
  const bitsCanon = bit1 + bit2 + bit3 + bit4; // canonical (1=ูุฑุฏ) as used above
  return bitsCanon;
}

$('#btnSample').addEventListener('click', () => $('#pgnText').value = `1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 d6 8. c3 O-O 9. h3 Nb8`);
$('#filePGN').addEventListener('change', (e) => {
  const f = e.target.files[0];
  if (!f) return;
  const r = new FileReader();
  r.onload = () => $('#pgnText').value = r.result;
  r.readAsText(f);
});

$('#analyzePGN').addEventListener('click', () => {
  const txt = $('#pgnText').value || '';
  if (!txt.trim()) {
    alert('ุฃุฏุฎู PGN');
    return;
  }
  const toks = parsePGN(txt);
  const log = $('#pgnLog');
  log.innerHTML = '';
  toks.forEach((san, i) => {
    const bits = sanToBits(san, i);
    const name = figByBits(bits) ? figByBits(bits)[1] : 'ุดูู ุบูุฑ ูุนุฑูู';
    const rumalForm = findRumalFormByBits(bits);
    const badge = badgeFromCanonical(bits);
    const side = (i % 2 === 0) ? 'ุฃุจูุถ' : 'ุฃุณูุฏ';
    const div = document.createElement('div');
    div.className = 'small';
    div.innerHTML = `<b>${i + 1}. ${san}</b> โ <code>${bits}</code> ${badge} โ ${name} ${rumalForm ? `<span style="color:#a78bfa">(${rumalForm.name})</span>` : ''}`;
    log.appendChild(div);
    // store last match for linking
    window._lastPGNMatch = { i, san, bits, name, side };
    // speak short summary
    speak(`ูููุฉ ${i + 1} ${side}: ${san}. ุฑูุฒ ุงูุฑูู: ${name}.`);
  });
});

/* ---------- ุญูุธ ูุงุณุชูุฑุงุฏ JSON ---------- */
$('#exportBtn').addEventListener('click', () => {
  saveLocal();
  const blob = new Blob([JSON.stringify(DATA, null, 2)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'raml_chess_export.json';
  a.click();
  URL.revokeObjectURL(url);
});

$('#importBtn').addEventListener('click', () => $('#jsonIn').click());

$('#jsonIn').addEventListener('change', (e) => {
  const f = e.target.files[0];
  if (!f) return;
  const r = new FileReader();
  r.onload = () => {
    try {
      const obj = JSON.parse(r.result);
      if (obj.figs) DATA.figs = obj.figs;
      if (obj.transcript) DATA.transcript = obj.transcript;
      saveLocal();
      renderFigTable();
      renderBoard();
      renderHouses();
      renderDivineNamesTable();
      renderTakhtTable();
      alert('ุชู ุงูุงุณุชูุฑุงุฏ');
    } catch (err) {
      alert('ููู ุบูุฑ ุตุงูุญ');
    }
  };
  r.readAsText(f);
});

/* ุญูุธ ุงููุต ุงููุฌููุจ ูู ุงูููุฏูู */
$('#applyTranscript').addEventListener('click', () => {
  DATA.transcript = $('#videoTranscript').value.trim();
  saveLocal();
  alert('ุชู ุญูุธ ุงููุต (Transcript) ุฏุงุฎู ุงููุงุนุฏุฉ. ุณูุธูุฑ ูู ุงูุดุฑุญ ุงูููุณุน.');
});

/* ---------- ุงูุชููุฆุฉ ุงูุฃูููุฉ ---------- */
loadLocal();
$('#videoTranscript').value = DATA.transcript || '';
renderFigTable();
renderBoard();
renderHouses();
renderDivineNamesTable();
renderTakhtTable(); // ุฅุถุงูุฉ ุฌุฏูู ุงูุชุฎุช

/* ุฑุจุท: ุนูุฏ ุญูุธ SIXTEEN ุฃู ุชุญุฏูุซ ุงููุงููุณ ูุฌุจ ุฅุนุงุฏุฉ ุงูุนุฑุถ */
function figByBits(bits) {
  return DATA.figs.find(f => f[0] === bits);
}

/* ---------- ุชูุตูู ุฅุฏุฎุงู ุณุฑูุน ุจุงูููุฑ ุนูู ุฎุงูุฉ ุงูุญุงุดูุฉ ---------- */
$('#quickClear').addEventListener('click', () => $('#quickBits').value = '');
$('#board').addEventListener('click', (ev) => {
  // ุฅุฐุง ูุงู ููุงู ูุต ูู quickBits ูููุฑ ุงููุณุชุฎุฏู ุนูู ุฎุงูุฉ ุญุงุดูุฉ โ ุซุจุชูุง
  const target = ev.target.closest('.sq');
  if (!target) return;
  const rank = parseInt(target.dataset.rank);
  const file = parseInt(target.dataset.file);
  // ููุท ุฅุฐุง quickBits ููุฌูุฏ ู ุฎุงูุฉ ุญุงุดูุฉ:
  const q = ($('#quickBits').value || '').trim();
  if (/^[01]{4}$/.test(q) && (rank === 1 || rank === 8)) {
    const canon = toCanonical(q);
    const slot = (rank === 1 ? 0 : 8) + file;
    SIXTEEN[slot] = canon;
    saveLocal();
    renderSixteen();
    renderBoard();
    logInfo(`ุซุจุช ุงูุดูู ${canon} ูู ${FILES[file]}${rank}`);
    $('#quickBits').value = '';
    return;
  }
});

// ุฑุจุท ุฃุฒุฑุงุฑ ูุธุงุฆู ุงูุดุฌุฑุฉ
$('#fillEmptySquares').addEventListener('click', fillEmptySquaresWithRahmanTree);
$('#analyzeAllWords').addEventListener('click', analyzeAllWords);

/* ุชุญุฏูุซ ุงููุงุฌูุฉ ูููุง ุชุบูุฑุช ุจูุงูุงุช ุงููุงููุณ */
function refreshAll() {
  renderFigTable();
  renderBoard();
  renderHouses();
  renderDivineNamesTable();
  renderTakhtTable();
  saveLocal();
}

/* ุชูููุฐ ุชุญุฏูุซ ุนูุฏ ุชุญููู ุงูุตูุญุฉ ุฃู ุชุบููุฑุงุช */
window.addEventListener('beforeunload', () => saveLocal());

/* ---------- ุชูุนูู/ุฅููุงู ูุฑุงุกุฉ AI ---------- */
$('#ttsToggleBtn').addEventListener('click', () => {
  ttsEnabled = !ttsEnabled;
  $('#ttsStatus').textContent = ttsEnabled ? '(ููุดุบูู)' : '(ูุชููู)';
  $('#ttsToggleBtn').textContent = ttsEnabled ? 'ุฅููุงู ูุฑุงุกุฉ AI' : 'ุชุดุบูู ูุฑุงุกุฉ AI';
});
</script>
</body>
</html>